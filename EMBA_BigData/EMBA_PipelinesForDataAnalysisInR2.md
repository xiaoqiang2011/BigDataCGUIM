Pipelines For Data Analysis In R, part 2
========================================================
author: æ›¾æ„å„’ Yi-Ju Tseng
autosize: true
font-family: 'Microsoft JhengHei'
navigation: slide

è³‡æ–™åˆ†ææ­¥é©Ÿ
========================================================
- **è³‡æ–™åŒ¯å…¥** 
- **è³‡æ–™æ¸…æ´—è™•ç†**ä¸¦è½‰æ›ç‚ºTidy data
- è³‡æ–™åˆ†æ
- è³‡æ–™å‘ˆç¾èˆ‡è¦–è¦ºåŒ–

è³‡æ–™åŒ¯å…¥
====================================
- å¾æª”æ¡ˆåŒ¯å…¥
- å¾ç¶²è·¯åŒ¯å…¥
- å¾FacebookåŒ¯å…¥
- å¾TwitteråŒ¯å…¥
- è³‡æ–™åŒ¯å‡º

å¾æª”æ¡ˆåŒ¯å…¥
====================================
type:section
- Import DatasetåŠŸèƒ½ (RStudio)
- Rç‰©ä»¶ .rds
- Rç¨‹å¼ .R
- ç´”æ–‡å­—è³‡æ–™ (ç„¡åˆ†éš”)
- å…¶ä»–æ ¼å¼

Import DatasetåŠŸèƒ½ (RStudio)
====================================
é¸å–RStudioå››åˆ†å‰²è¦–çª—å³ä¸Šè§’çš„Environmentæ¨™ç±¤ï¼Œé¸æ“‡**Import Dataset**

![plot of chunk unnamed-chunk-1](figures/import.png)

Import DatasetåŠŸèƒ½ (RStudio)
====================================
- é¸å–`From CSV`
- é»é¸`Browse`æŒ‰éˆ•é–‹å•Ÿæª”æ¡ˆé¸å–å™¨

![plot of chunk unnamed-chunk-2](figures/csv.png)

Import DatasetåŠŸèƒ½ (RStudio)
====================================
- åˆ©ç”¨ä¸‹æ–¹`Import Options`çš„é¸é …å¾®èª¿åƒæ•¸
    - `Delimiter`åˆ†éš”ç¬¦è™Ÿ
    - `First Row as Names`é¦–åˆ—æ˜¯å¦ç‚ºæ¬„ä½åç¨±
    
![plot of chunk unnamed-chunk-3](figures/csv2.png)

Import DatasetåŠŸèƒ½ (RStudio)
====================================
type:alert
incremental:true

- æ“ä½œ[ç¯„ä¾‹æª”æ¡ˆ](https://raw.githubusercontent.com/CGUIM-BigDataAnalysis/BigDataCGUIM/master/104/POLIO_Incidence.csv)
- è‹¥åŒ¯å…¥çš„æª”æ¡ˆç‚º**tabåˆ†éš”æ–‡å­—æª”**? è©²å¦‚ä½•èª¿æ•´åƒæ•¸ï¼Ÿ

Rç‰©ä»¶ .rds
====================================
type:sub-section
å¦‚æœåœ¨Rç¨‹å¼å…§è™•ç†å®Œè³‡æ–™å¾Œï¼Œå¿…é ˆå„²å­˜ä¸€ä»½ä»¥ä¾›å¾ŒçºŒåˆ†æï¼Œä½¿ç”¨Rç‰©ä»¶å„²å­˜æ˜¯æœ€ä½³çš„æ–¹å¼

- æª”æ¡ˆå°
- è®€å–å¿«é€Ÿ
- æ¨è–¦ä½¿ç”¨`readRDS()`å‡½æ•¸è®€å–RDSæª”æ¡ˆ
- [A better way of saving and loading objects in R](http://www.fromthebottomoftheheap.net/2012/04/01/saving-and-loading-r-objects/)

```r
dataset <- readRDS("æª”æ¡ˆè·¯å¾‘èˆ‡åç¨±")
```

Rç¨‹å¼ .R
====================================
type:sub-section
- `source`å‡½æ•¸
- è®€Rçš„Obejct or script, **åŸ·è¡Œ**
- **å¯¦éš›æ“ä½œç¯„ä¾‹**
    - æœ‰ä¸€ä»½example.Ræª”åœ¨å·¥ä½œç’°å¢ƒä¸­
    - ä¸€æ¬¡åŸ·è¡Œæª”æ¡ˆå…§æ‰€æœ‰RæŒ‡ä»¤

```r
source("example.R") 
```

ç´”æ–‡å­—è³‡æ–™ (ç„¡åˆ†éš”)
====================================
type:sub-section
`readLines`, é€è¡Œè®€å–æ–‡å­—è³‡æ–™

å¾ç¶²è·¯åŒ¯å…¥
====================================
type:section

- Open Data
- XML å¯å»¶ä¼¸æ¨™è¨˜å¼èªè¨€
- ç¶²é çˆ¬èŸ² Webscraping
- API (Application programming interfaces)
- JSONæ ¼å¼æª”æ¡ˆ

Open Data é–‹æ”¾è³‡æ–™
====================================
type:sub-section
- 2011å¹´æ¨å‹•é–‹æ”¾æ”¿åºœèˆ‡é–‹æ”¾è³‡æ–™ ([ç¶­åŸºç™¾ç§‘](https://zh.wikipedia.org/wiki/%E9%96%8B%E6%94%BE%E8%B3%87%E6%96%99))
- ä¸å—è‘—ä½œæ¬Šã€å°ˆåˆ©æ¬Šï¼Œä»¥åŠå…¶ä»–ç®¡ç†æ©Ÿåˆ¶æ‰€é™åˆ¶ï¼Œä»»ä½•äººéƒ½å¯ä»¥è‡ªç”±å‡ºç‰ˆä½¿ç”¨
- å¸¸è¦‹çš„å„²å­˜æ–¹å¼ç‚º: 
    - `CSV`
    - `JSON`
    - `XML`
    
Open Data é–‹æ”¾è³‡æ–™å¸¸è¦‹å¹³å°
====================================
- [æ”¿åºœè³‡æ–™é–‹æ”¾å¹³å°](http://data.gov.tw/)
- [Data Taipei](http://data.taipei/)
- [é–‹æ”¾è³‡æ–™ x é–‹æ”¾æ¡ƒåœ’](http://data.tycg.gov.tw/)
- [å…§æ”¿è³‡æ–™é–‹æ”¾å¹³å°](http://data.moi.gov.tw/)

XML å¯å»¶ä¼¸æ¨™è¨˜å¼èªè¨€
====================================
type:sub-section

- E**x**tensible **m**arkup **l**anguage
- æè¿°**çµæ§‹åŒ–**è³‡æ–™çš„èªè¨€
- è™•ç†XMLæª”æ¡ˆæ˜¯ç¶²é **Html**çˆ¬èŸ²çš„åŸºç¤
- Components
    - Markup æ¨™è¨˜ - labels that give the text structure
    - Content å…§æ–‡ - the actual text of the document
- [XML Wiki](https://zh.wikipedia.org/wiki/XML)

XML å¯å»¶ä¼¸æ¨™è¨˜å¼èªè¨€
====================================
Tags, elements and attributes

- Tags correspond to general labels
    - Start tags `<breakfast_menu>`, `<price>`
    - End tags `</breakfast_menu>`,`</price>`
    - Empty tags `<line-break />`
- Elements are specific examples of tags
    - `<name>Belgian Waffles</name>`
- Attributes are components of the label
    - `<book category="web">`
    
XML å¯å»¶ä¼¸æ¨™è¨˜å¼èªè¨€-è®€å–
====================================
- [è‡ºåŒ—å¸‚æ°´è³ªç›£æ¸¬è³‡è¨Š](http://data.taipei/opendata/datalist/datasetMeta/download?id=961ca397-4a59-45e8-b312-697f26b059dc&rid=190796c8-7c56-42e0-8068-39242b8ec927)
- å®‰è£`xml2` package
- `xmlParse()`å‡½æ•¸å°‡XMLæª”æ¡ˆåŒ¯å…¥


```r
library(xml2)
waterURL<-"http://data.taipei/opendata/datalist/datasetMeta/download?id=961ca397-4a59-45e8-b312-697f26b059dc&rid=190796c8-7c56-42e0-8068-39242b8ec927"
waterQ <- read_xml(waterURL)
```

xpath?
====================================
- XMLè·¯å¾‘èªè¨€ï¼ˆXML Path Languageï¼‰
- åŸºæ–¼XMLçš„æ¨¹ç‹€çµæ§‹ï¼Œæä¾›åœ¨è³‡æ–™çµæ§‹æ¨¹ä¸­æ‰¾å°‹ç¯€é»çš„èƒ½åŠ›
- [ç¶­åŸºç™¾ç§‘](https://zh.wikipedia.org/wiki/XPath)
- [å¸¸è¦‹èªæ³•](http://tech-marsw.logdown.com/blog/2016/01/11/parsing-lxml-xpath-sheet)

XML å¯å»¶ä¼¸æ¨™è¨˜å¼èªè¨€-è§£æ
====================================
ä½¿ç”¨`xml_find_all()`ä»¥åŠ`xml_text()`å‡½æ•¸å–å¾—æŒ‡å®šæ¨™ç±¤å…§çš„è³‡æ–™

```r
#å–å¾—æ‰€æœ‰"code_name"æ¨™ç±¤å…§çš„è³‡æ–™
code_name_xml<-xml_find_all(waterQ, ".//code_name")
code_name<-xml_text(code_name_xml)
code_name[1:10]
```

```
 [1] "é›™æºªæ·¨æ°´å ´"               "è¡›ç†å¥³ä¸­"                
 [3] "é›™æºªåœ‹å°                " "è¯èˆˆåŠ å£“ç«™"              
 [5] "é•·èˆˆæ·¨æ°´å ´"               "å¸‚æ”¿å¤§æ¨“"                
 [7] "å¸‚è­°æœƒ"                   "æ·é‹å¿ å­å¾©èˆˆç«™"          
 [9] "å—æ¸¯é«˜å·¥"                 "å—æ¸¯åŠ å£“ç«™"              
```

XML å¯å»¶ä¼¸æ¨™è¨˜å¼èªè¨€-è§£æ
====================================
ä½¿ç”¨`xml_find_all()`ä»¥åŠ`xml_text()`å‡½æ•¸å–å¾—æŒ‡å®šæ¨™ç±¤å…§çš„è³‡æ–™

```r
#å–å¾—å„ç›£æ¸¬ç«™çš„ç¶“åº¦longitude
longitude_xml<-xml_find_all(waterQ, ".//longitude")
longitude<-xml_text(longitude_xml)
longitude[1:10]
```

```
 [1] "121.569433" "121.55231"  "121.563886" "121.544384" "121.547873"
 [6] "121.563997" "121.561975" "121.54342"  "121.607462" "121.616217"
```

XMLæª”æ¡ˆåŒ¯å…¥ç·´ç¿’
====================================
type:alert
incremental:true
- è¼‰å…¥[æ¡ƒåœ’æ·é‹è»Šç«™å‡ºå…¥å£åŸºæœ¬è³‡æ–™](http://data.tycg.gov.tw/opendata/datalist/datasetMeta/download?id=b2653545-9425-46df-9a50-74ade59ab0cf&rid=f6362ce8-719b-4752-bec6-7fd995b623fd)
- å˜—è©¦å–å¾—å„ç«™å‡ºå…¥å£æ•˜è¿°(LocationDescription)èˆ‡ç¶“ç·¯åº¦(PositionLon,PositionLat)
- åƒè€ƒå‰›å‰›çš„æ°´ç«™ç¯„ä¾‹

```r
library(xml2)
waterURL<-"http://data.taipei/opendata/datalist/datasetMeta/download?id=961ca397-4a59-45e8-b312-697f26b059dc&rid=190796c8-7c56-42e0-8068-39242b8ec927"
waterQ <- read_xml(waterURL)
longitude_xml<-xml_find_all(waterQ, ".//longitude")
longitude<-xml_text(longitude_xml)
longitude[1:10]
```



API
====================================
type:sub-section
- æ‡‰ç”¨ç¨‹å¼ä»‹é¢
- **A**pplication **P**rogramming **I**nterfaces
- ç‚ºäº†è®“ç¬¬ä¸‰æ–¹çš„é–‹ç™¼è€…å¯ä»¥é¡å¤–é–‹ç™¼æ‡‰ç”¨ç¨‹å¼ä¾†å¼·åŒ–ä»–å€‘çš„ç”¢å“ï¼Œæ¨å‡ºå¯ä»¥èˆ‡ç³»çµ±æºé€šçš„ä»‹é¢
- æœ‰APIè¼”åŠ©å¯å°‡è³‡æ–™æ“·å–éç¨‹è‡ªå‹•åŒ–
    -  ä»¥ä¸‹è¼‰Open Dataç‚ºä¾‹ï¼Œè‹¥æª”æ¡ˆæ›´æ–°é »ç¹ï¼Œä½¿ç”¨æ‰‹å‹•ä¸‹è¼‰ç›¸ç•¶è€—æ™‚
- [ç¶­åŸºç™¾ç§‘](https://zh.wikipedia.org/zh-tw/%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%8F%A3)

API - Open Data
====================================
- [æ¡ƒåœ’å…¬å…±è‡ªè¡Œè»Šå³æ™‚æœå‹™è³‡æ–™](http://data.tycg.gov.tw/opendata/datalist/datasetMeta?oid=5ca2bfc7-9ace-4719-88ae-4034b9a5a55c)è³‡æ–™
- æ¯æ—¥æ›´æ–°
- ä¸å¯èƒ½æ¯æ—¥æ‰‹å‹•ä¸‹è¼‰
- æä¾›é€é**API**ä¸‹è¼‰çš„æœå‹™
- é€éAPIä¸‹è¼‰çš„è³‡æ–™æ ¼å¼: **JSONæ ¼å¼**

***

- [æ¡ƒåœ’å…¬å…±è‡ªè¡Œè»Šå³æ™‚æœå‹™è³‡æ–™APIè³‡è¨Š](http://data.tycg.gov.tw/opendata/datalist/datasetMeta/outboundDesc?id=5ca2bfc7-9ace-4719-88ae-4034b9a5a55c&rid=a1b4714b-3b75-4ff8-a8f2-cc377e4eaa0f)
    - **è³‡æ–™é›†ID**: ç´€éŒ„è³‡æ–™çš„åŸºæœ¬åƒæ•¸ï¼Œå¦‚åŒ…å«æ¬„ä½ã€æ›´æ–°é »ç‡ç­‰
    - **è³‡æ–™RID**: è³‡æ–™é›†
    - æ“·å–ç¯„ä¾‹


JSONæ ¼å¼æª”æ¡ˆ
====================================
type:sub-section

- JSON (**J**ava**s**cript **O**bject **N**otation)
- è¼•é‡ç´šçš„è³‡æ–™äº¤æ›èªè¨€
- From **a**pplication **p**rogramming **i**nterfaces (APIs)
- JavaScriptã€Javaã€Node.jsæ‡‰ç”¨
- ä¸€äº›NoSQLè³‡æ–™åº«ç”¨JSONå„²å­˜è³‡æ–™ï¼š**MongoDB**
- [Wiki](http://en.wikipedia.org/wiki/JSON)


JSONæª”æ¡ˆåŒ¯å…¥
====================================
- `jsonlite` package (å¥—ä»¶ä½¿ç”¨å‰å¿…é ˆå®‰è£)
- `fromJSON()`å‡½æ•¸è¼‰å…¥JSONè³‡æ–™
- å¦‚æœAPIç¶²å€ç‚º**https**ï¼Œå‰‡éœ€ä½¿ç”¨ `httr` package
    - ä½¿ç”¨`GET()`å‡½æ•¸è™•ç†è³‡æ–™æ“·å–ç¶²å€
- APIç¶²å€åƒè€ƒ[æ¡ƒåœ’å…¬å…±è‡ªè¡Œè»Šå³æ™‚æœå‹™è³‡æ–™APIè³‡è¨Š](http://data.tycg.gov.tw/opendata/datalist/datasetMeta/outboundDesc?id=5ca2bfc7-9ace-4719-88ae-4034b9a5a55c&rid=a1b4714b-3b75-4ff8-a8f2-cc377e4eaa0f)

```r
library(jsonlite)
library(RCurl)
APIData<-fromJSON("http://data.tycg.gov.tw/api/v1/rest/datastore/a1b4714b-3b75-4ff8-a8f2-cc377e4eaa0f?format=json")
```

JSONæª”æ¡ˆåŒ¯å…¥
====================================
- è½‰å­˜ç‚º`åˆ—è¡¨list`çš„å‹æ…‹
- å…©å€‹å­å…ƒç´ (success, result)
- resultä¸­recordså­å…ƒç´ çš„é¡åˆ¥ç‚ºè³‡æ–™æ¡†data.frame

```r
str(APIData)
```

```
List of 2
 $ success: logi TRUE
 $ result :List of 6
  ..$ resource_id: chr "a1b4714b-3b75-4ff8-a8f2-cc377e4eaa0f"
  ..$ fields     :'data.frame':	15 obs. of  2 variables:
  .. ..$ type: chr [1:15] "int4" "text" "text" "text" ...
  .. ..$ id  : chr [1:15] "_id" "sno" "sna" "tot" ...
  ..$ records    :'data.frame':	100 obs. of  15 variables:
  .. ..$ _id    : int [1:100] 1 2 3 4 5 6 7 8 9 10 ...
  .. ..$ sarea  : chr [1:100] "ä¸­å£¢å€" "ä¸­å£¢å€" "ä¸­å£¢å€" "ä¸­å£¢å€" ...
  .. ..$ sareaen: chr [1:100] "Zhongli Dist." "Zhongli Dist." "Zhongli Dist." "Zhongli Dist." ...
  .. ..$ sna    : chr [1:100] "ä¸­å¤®å¤§å­¸åœ–æ›¸é¤¨" "ä¸­å£¢é«˜ä¸­" "ä¸­æ­£å…¬åœ’(ä¸­ç¾è·¯)" "ä¸­å£¢ç«è»Šç«™(å‰ç«™)" ...
  .. ..$ aren   : chr [1:100] "No.300, Zhongda Rd." "No.215, Sec. 2, Zhongyang W. Rd. (opposite)" "No.101 to No.113, Zhongmei Rd. (opposite)" "No.139, Zhonghe Rd. (opposite)" ...
  .. ..$ sno    : chr [1:100] "2001" "2002" "2003" "2004" ...
  .. ..$ tot    : chr [1:100] "60" "52" "54" "114" ...
  .. ..$ snaen  : chr [1:100] "National Central University Library" "Jhungli Senior High School" "Zhongzheng Park" "TRA Zhongli Station (Front)" ...
  .. ..$ bemp   : chr [1:100] "50" "29" "28" "84" ...
  .. ..$ ar     : chr [1:100] "ä¸­å¤§è·¯300è™Ÿ(ä¸­å¤®å¤§å­¸æ ¡å…§åœ–æ›¸é¤¨å‰)" "ä¸­å¤®è¥¿è·¯äºŒæ®µ215è™Ÿå°é¢äººè¡Œé“" "ä¸­ç¾è·¯101è™Ÿ-113è™Ÿå°é¢äººè¡Œé“" "ä¸­å’Œè·¯139è™Ÿå°é¢åœ“ç’°" ...
  .. ..$ act    : chr [1:100] "1" "1" "1" "1" ...
  .. ..$ lat    : chr [1:100] "24.968128" "24.960815" "24.959113" "24.953874" ...
  .. ..$ lng    : chr [1:100] "121.194666" "121.212038" "121.224805" "121.2256" ...
  .. ..$ sbi    : chr [1:100] "9" "22" "26" "26" ...
  .. ..$ mday   : chr [1:100] "20190309005319" "20190309005318" "20190309005330" "20190309005316" ...
  ..$ offset     : int 0
  ..$ total      : int 284
  ..$ limit      : int 100
```

JSONæª”æ¡ˆè§£æ
====================================
- ä½¿ç”¨`$`ç¬¦è™Ÿæˆªå–å…ƒç´ èˆ‡å­å…ƒç´ 

```r
head(APIData$result$records)
```

| _id|sarea  |sareaen       |sna              |aren                                             |sno  |tot |snaen                                    |bemp |
|---:|:------|:-------------|:----------------|:------------------------------------------------|:----|:---|:----------------------------------------|:----|
|   1|ä¸­å£¢å€ |Zhongli Dist. |ä¸­å¤®å¤§å­¸åœ–æ›¸é¤¨   |No.300, Zhongda Rd.                              |2001 |60  |National Central University Library      |50   |
|   2|ä¸­å£¢å€ |Zhongli Dist. |ä¸­å£¢é«˜ä¸­         |No.215, Sec. 2, Zhongyang W. Rd. (opposite)      |2002 |52  |Jhungli Senior High School               |29   |
|   3|ä¸­å£¢å€ |Zhongli Dist. |ä¸­æ­£å…¬åœ’(ä¸­ç¾è·¯) |No.101 to No.113, Zhongmei Rd. (opposite)        |2003 |54  |Zhongzheng Park                          |28   |
|   4|ä¸­å£¢å€ |Zhongli Dist. |ä¸­å£¢ç«è»Šç«™(å‰ç«™) |No.139, Zhonghe Rd. (opposite)                   |2004 |114 |TRA Zhongli Station (Front)              |84   |
|   5|ä¸­å£¢å€ |Zhongli Dist. |ä¸­åŸå¤§å­¸         |No.200, Zhongbei Rd.                             |2005 |82  |Chung Yuan Christian University          |38   |
|   6|ä¸­å£¢å€ |Zhongli Dist. |éŠ€æ²³å»£å ´         |No.48, Jiuhe 1st St. (opposite)                  |2006 |58  |Galaxy Square                            |26   |
|   7|ä¸­å£¢å€ |Zhongli Dist. |ä¸­å£¢å€å…¬æ‰€       |No.380, Huanbei Rd.                              |2007 |40  |Civil Affairs Office of Zhongli District |25   |
|   8|ä¸­å£¢å€ |Zhongli Dist. |æ–°æ˜æ©‹           |No.269 to No.373, Sec. 2, Yuanhua Rd. (opposite) |2008 |58  |Xinming Bridge                           |30   |

JSONæª”æ¡ˆè§£æ
====================================
åˆ†æå„é …**åœ°å€**è»Šç«™æ•¸

```r
table(APIData$result$records$sarea)
```

|Var1   | Freq|
|:------|----:|
|ä¸­å£¢å€ |   35|
|å…«å¾·å€ |    5|
|å¤§åœ’å€ |    2|
|å¤§æºªå€ |    2|
|å¹³é®å€ |    7|
|æ¡ƒåœ’å€ |   32|
|è˜†ç«¹å€ |    7|
|é¾œå±±å€ |   10|
åˆ†æå¯çŸ¥ä¸­å£¢å€è»Šç«™è¼ƒå¤š


JSONæª”æ¡ˆåŒ¯å…¥ç·´ç¿’
====================================
type:alert
incremental:true

- ç·´ç¿’ç”¨è³‡æ–™ï¼š[ã€Œè‡ºåŒ—å¸‚ä»Šæ—¥æ–½å·¥è³‡è¨Šã€APIå­˜å–](http://data.taipei/opendata/datalist/datasetMeta/outboundDesc?id=4d29818c-a3ee-425d-b88a-22ac0c24c712&rid=201d8ae8-dffc-4d17-ae1f-e58d8a95b162)
- ä½¿ç”¨æª”æ¡ˆåŒ¯å…¥**ç¯„ä¾‹**ï¼Œå°‡è³‡æ–™åŒ¯å…¥Rä¸­
    - æç¤ºï¼š**fromJSON**
- ä½¿ç”¨str()å‡½æ•¸è§€å¯ŸåŒ¯å…¥çš„è³‡æ–™
- è«‹å•ä»Šæ—¥æ–½å·¥è³‡æ–™æœ‰å¹¾ç­†è§€å¯Ÿå€¼ï¼Ÿå¹¾å€‹æ¬„ä½ï¼Ÿ


ç¶²é çˆ¬èŸ² Webscraping
====================================
type:sub-section

- ä¸æ˜¯æ¯å€‹ç¶²ç«™éƒ½æä¾›API
- äººå·¥è¤‡è£½è²¼ä¸Š?!
- ç¨‹å¼åŒ–çš„æ–¹å¼æ“·å–ç¶²é è³‡æ–™: **ç¶²é çˆ¬èŸ²ï¼ˆWebscrapingï¼‰**ï¼ˆ[Webscraping Wiki](http://en.wikipedia.org/wiki/Web_scraping)ï¼‰
- å¯èƒ½è€—è²»å¾ˆå¤šç¶²é æµé‡å’Œè³‡æº ï¼å¾ˆå¯èƒ½è¢«é–IP
- åœ¨Rçš„è™•ç†è¾¦æ³•
    - ç•¶ä½œXMLæª”æ¡ˆè™•ç†åˆ†æ
    - ä½¿ç”¨`rvest` packageè¼”åŠ©

ç¶²é çˆ¬èŸ² Webscraping-rvest
====================================

è¼‰å…¥[rvest](https://github.com/hadley/rvest)å¥—ä»¶å¾Œï¼Œç¶“ç”±ä»¥ä¸‹æ­¥é©Ÿé€²è¡Œç¶²ç«™è§£æï¼š

- ä½¿ç”¨`read_html(â€œæ¬²æ“·å–çš„ç¶²ç«™ç¶²å€â€)`å‡½æ•¸è®€å–ç¶²é 
- ä½¿ç”¨`html_nodes()`å‡½æ•¸æ“·å–æ‰€éœ€å…§å®¹ (æ¢ä»¶ç‚ºCSSæˆ–xpathæ¨™ç±¤)
- ä½¿ç”¨`html_text()`å‡½æ•¸è™•ç†/æ¸…æ´—æ“·å–å…§å®¹ï¼Œç•™ä¸‹éœ€è¦çš„è³‡æ–™
- ä½¿ç”¨`html_attr()`å‡½æ•¸æ“·å–è³‡æ–™åƒæ•¸ï¼ˆå¦‚é€£çµurlï¼‰

ç¶²é çˆ¬èŸ² Webscraping-rvest
====================================

```r
library(rvest) ##è¼‰å…¥
Repoterurl<-"https://www.twreporter.org/"
Repoterhtml<-read_html(Repoterurl)
news_title <- Repoterhtml %>% 
    html_nodes(".iEENPo") %>% html_text()
news_url <- Repoterhtml %>% 
    html_nodes(".hsSyKH a") %>% html_attr("href")
news <- data.frame(title = news_title, url=news_url)
head(news,2)
```

```
                                                       title
1     é»ƒå‰ç¿”ï¼é™·åœ¨æ‹›æ”¶å¤–ç”Ÿå’Œå‰å‰Šå­¸å·¥ä¹‹é–“ï¼Œæ–°å—å‘å°ˆç­éŒ¯åœ¨å“ªï¼Ÿ
2 åœ¨æ§åˆ¶ä¸­å¾©èˆˆï¼Œåœ¨å¾©èˆˆä¸­æ‰“å£“â”€â”€æ™®ç«‹èŒ²çå¾—ä¸»å¼µå½¥è«‡ä¸­åœ‹å®—æ•™æ²»ç†
                                                                      url
1     /a/opinion-new-southbound-talent-development-program-intern-problem
2 /a/interview-ian-johnson-the-soul-of-china-return-of-religion-after-mao
```


ç¶²é çˆ¬èŸ² Webscraping-rvest
====================================
- æ“·å–æ¢ä»¶çš„æ’°å¯«æœƒå› ç¶²é èªæ³•ä¸åŒè€Œæœ‰å·®ç•°
- ä½¿ç”¨**Google Chromeé–‹ç™¼å·¥å…·**è¼”åŠ©è§€å¯Ÿæ“·å–è³‡æ–™çš„æ¢ä»¶
    - æˆ–ä½¿ç”¨**SelectorGadget**è¼”åŠ©
    - æˆ–ä½¿ç”¨**xpath-helper**è¼”åŠ©xpathæ¨™ç±¤çš„æ“·å–
- è§€å¯Ÿéœ€è¦æ“·å–çš„è³‡æ–™æ‰€åœ¨HTMLç‰‡æ®µ
    - css classç‚º`latest-section__ItemFrame-keac6x-1 hsSyKH`

```
<div class="latest-section__ItemFrame-keac6x-1 hsSyKH"><a href="/a/opinion-new-southbound-talent-development-program-intern-problem"><div class="hover-effect__HoverEffect-sc-10n0hry-0 iRkkRY"><div class="latest-section__ImageFrame-keac6x-2 dyFjYc"><div class="img-wrapper__ImgObjectFit-clvi31-0 cprQrJ"><img alt="é»ƒå‰ç¿”ï¼æ–°å—å‘å°ˆç­ï¼Œæ‰¾å­¸ç”Ÿé‚„æ˜¯æ‰¾å»‰åƒ¹å‹åŠ›_(ç…§ç‰‡/æ•™è‚²éƒ¨é«˜æ•™å¸æä¾›)" src="https://www.twreporter.org/images/20190308150442-52ed12aed14ade917f1c273f4037daf8-mobile.jpg" srcset="https://www.twreporter.org/images/20190308150442-52ed12aed14ade917f1c273f4037daf8-mobile.jpg 800w, https://www.twreporter.org/images/20190308150442-52ed12aed14ade917f1c273f4037daf8-w400.jpg 400w" sizes="(min-width: 1024px) 199px, (min-width: 768px) 160px, 136px" style="transform: translateZ(0px);" class=""></div></div><div class="latest-section__ContentFrame-keac6x-3 nhxeb">
....
```

ç¶²é çˆ¬èŸ² DCardå¯¦ä½œ -1
====================================

```r
library(rvest) ##(çˆ¬èŸ²çµæœä¸ä»£è¡¨æœ¬äººæ„è¦‹)
DCardCGU<-"https://www.dcard.tw/f/cgu"
DCardContent<-read_html(DCardCGU)
post_title <- DCardContent %>% 
    html_nodes(".PostEntry_title_H5o4dj") %>% 
    html_text()
post_contentShort<- DCardContent %>% 
    html_nodes(".PostEntry_excerpt_2eHlNn") %>% 
    html_text()
post_author<- DCardContent %>% 
    html_nodes(".PostAuthor_root_3vAJfe") %>% 
    html_text()
```

ç¶²é çˆ¬èŸ² DCardå¯¦ä½œ -2
====================================

```r
##(çˆ¬èŸ²çµæœä¸ä»£è¡¨æœ¬äººæ„è¦‹)
post_like<- DCardContent %>% 
    html_nodes(".hlvyVg") %>% html_text()
post_url <- DCardContent %>% 
    html_nodes(".PostEntry_root_V6g0rd") %>% html_attr("href")
DCardCGU_posts <- 
    data.frame(title = post_title,
               author=post_author, 
               content=post_contentShort, 
               likeN=post_like,
               url=paste0("https://www.dcard.tw",post_url))
```

ç¶²é çˆ¬èŸ² DCardå¯¦ä½œ -3
====================================

```r
DCardCGU_posts
```

|title                                                 |author          |content                                                                                                                                                                                                                                        |likeN |url                                                                                          |
|:-----------------------------------------------------|:---------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-----|:--------------------------------------------------------------------------------------------|
|æ˜¯èª°æ‰äº†æ’æ°£ç®¡                                        |é•·åºšå¤§å­¸        |å“ªå€‹æ–½ä¸»æ¨æˆ‘ä¸€æ ¹æ’æ°£ç®¡åŠä¸€é ‚å®‰å…¨å¸½ï¼Œä¸æ˜¯æˆ‘çš„å–”ï¼Œå¤±ä¸»è«‹è‡ªè¡Œåˆ°åœè»Šå ´å¾Œé¢æ‰¾ï¼Œä¸å¹«ä½ é€å­¸å‹™è™•  è«‹è¦‹è«’ï¼Œæ…¶å¹¸ä¸æ˜¯è¦‹åˆ°è‡ªå·±çš„æ’æ°£ç®¡...ï¼Œæ·¦  åƒåœ¾ä¸è¦äº‚ä¸Ÿï¼Œæœƒåˆ®åˆ°åˆ¥äººçš„è»Šå­                                                                              |15    |https://www.dcard.tw/f/cgu/p/230841097-æ˜¯èª°æ‰äº†æ’æ°£ç®¡                                        |
|çƒ˜ç„™é€±é è³¼~3/10è™Ÿæ”¶å–®                                 |é•·åºšå¤§å­¸        |å¤§å®¶çŸ¥é“3/11~3/15æ˜¯ä»€éº¼æ—¥å­å—ï¼Ÿï¼Ÿæ²’éŒ¯ï¼å°±æ˜¯çƒ˜ç„™é€±æ‹‰ï¼ï¼ï¼Œé‚„è¨˜å¾—ä¸Šæ¬¡å¯å£çš„çƒ¤å¸ƒè•¾~ææ‹‰ç±³è˜‡å—ï¼ï¼Ÿé€™æ¬¡çƒ˜ç„™ç¤¾çš„åŒå­¸å€‘é€™æ¬¡åˆè¦å¸¶çµ¦å¤§å®¶å…¶ä»–å¥½åƒçš„ç”œé»æ‹‰ï¼ä¸Šæ¬¡å› ç‚ºåƒ¹æ ¼å»æ­¥çš„åŒå­¸é€™æ¬¡åƒè¬ä¸è¦å†éŒ¯éæ‹‰ï¼                                                 |15    |https://www.dcard.tw/f/cgu/p/230840149-çƒ˜ç„™é€±é è³¼~3ï¼10è™Ÿæ”¶å–®                                |
|ğŸ’“ã€Šå¤§æ˜æ˜Ÿå­¸å ‚-å°ç…œã€‹ç”Ÿå‘½æ•™è‚²è¬›åº§æš¨ç™½è‰²æƒ…äººç¯€ç‰¹åˆ¥æ´»å‹•ğŸ’“ |é•·åºšå¤§å­¸        |å„ä½åŒå­¸å¤§å®¶å¥½ï½æˆ‘å€‘æ˜¯æ¦®è€€åœ˜å¥‘ç¤¾ï¼ï¼Œä¸‹æ˜ŸæœŸå°±æ˜¯ç™½è‰²æƒ…äººç¯€å•¦ï¼ï¼ï¼Œå¤§å®¶æº–å‚™è·Ÿä½ å€‘å¿ƒæ„›çš„äººä¸€èµ·æ…¶ç¥äº†å—><ï¼Œä¸‹æ˜ŸæœŸå››çš„æƒ…äººç¯€å¤œæ™šï¼Œæˆ‘å€‘æœƒé‚€è«‹æ£’æ£’å ‚çš„å°ç…œåˆ°å ´ï¼Œåˆ†äº«ä»–åœ¨æ¼”è—åœˆçš„å¿ƒå¾—æ•…äº‹ï¼Œèˆ‡å¤§å®¶åº¦éæº«æš–çš„æƒ…äººç¯€å”·ğŸ¤—                                    |14    |https://www.dcard.tw/f/cgu/p/230837127-ğŸ’“ã€Šå¤§æ˜æ˜Ÿå­¸å ‚-å°ç…œã€‹ç”Ÿå‘½æ•™è‚²è¬›åº§æš¨ç™½è‰²æƒ…äººç¯€ç‰¹åˆ¥æ´»å‹•ğŸ’“ |
|TED å¹´æœƒ                                              |é•·åºšå¤§å­¸        |æƒ³å•ä¸€ä¸‹ï¼Œä»Šå¹´é‚„æœ‰TEDxCGUå˜›ï¼Œå¥½åƒæ²’çœ‹åˆ°æ¶ˆæ¯ğŸ¤”                                                                                                                                                                                                   |11    |https://www.dcard.tw/f/cgu/p/230837080-TED-å¹´æœƒ                                              |
|é¤¿æ‰çš„è²©è³£æ©Ÿå·§å…‹åŠ›æ‹¿éµï¼Ÿ                              |é•·åºšå¤§å­¸        |æœ‰äººä¹Ÿé‡éä¸€æ¨£çš„å•é¡Œå—å—å—å—å—å—å—ï¼Ÿï¼Ÿï¼Ÿï¼Ÿï¼Ÿ                                                                                                                                                                                                   |10    |https://www.dcard.tw/f/cgu/p/230833943-é¤¿æ‰çš„è²©è³£æ©Ÿå·§å…‹åŠ›æ‹¿éµï¼Ÿ                              |
|æ¹–æ°´ç¶ æ‰‹æ©Ÿæ®¼çš„æ‰‹æ©Ÿ                                    |é•·åºšå¤§å­¸        |åŒå­¸ä½ çš„æ‰‹æ©Ÿåœ¨ç®¡é™¢B0108ï¼Œé¢å°é»‘æ¿ï¼Œå¾å·¦é‚Šæ•¸ä¾†ç¬¬å››æ’ç¬¬ä¸‰å€‹ä½å­ï¼Œçš„æŠ½å±œå“¦ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“è¦æ‹¿å»å“ªè£¡ å°±æ²’å‹•å®ƒäº†ï¼Œå¸Œæœ›ä½ å»çš„æ™‚å€™å®ƒé‚„åœ¨å“ˆå“ˆå“ˆ                                                                                                           |7     |https://www.dcard.tw/f/cgu/p/230839196-æ¹–æ°´ç¶ æ‰‹æ©Ÿæ®¼çš„æ‰‹æ©Ÿ                                    |
|åŒå­¸ä½ çš„éŒ¢åŒ…                                          |é•·åºšå¤§å­¸        |åœ¨åœ‹æœƒé–‹é™¢æœƒï¼Œæ‹¾ç²ä¸€å€‹éŒ¢åŒ…ï¼Œæ˜å¤©æˆ‘åŒå­¸æœƒæ‹¿å»å­¸å‹™è™•æ”¾ï¼Œè¨˜å¾—å–ã„›                                                                                                                                                                                 |7     |https://www.dcard.tw/f/cgu/p/230834429-åŒå­¸ä½ çš„éŒ¢åŒ…                                          |
|å°‹æ‰¾å¤±ç‰© ç´„5cmçš„çš®å¡ä¸˜å¨ƒå¨ƒ                            |é•·åºšå¤§å­¸        |å¤§ç´„äº”å…¬åˆ†çš„çš®å¡ä¸˜å¨ƒå¨ƒï¼Œå› ç‚ºçœ‹èµ·ä¾†é«’é«’çš„æ€•è¢«èªç‚ºæ˜¯åƒåœ¾qwqï¼Œ3/7~3/8åœ¨æ ¡åœ’å…§éºå¤±çš„ï¼ˆï½¡â€¢ÌÏ‰à¸Ì€ï½¡ï¼‰â€¦ï½¸ï¾ï½½ï¼Œå¸Œæœ›æœ‰çœ‹åˆ°çš„äººèƒ½å°‡å®ƒå¸¶åˆ°å¤±ç‰©æ‹›é ˜é‚£é‚Šï¼Œæˆ‘å¾ˆåŠªåŠ›ç¥ˆç¦±å°‡å®ƒå¸¶åˆ°å­¸å‹™è™•å¤±ç‰©é‚£é‚Šçš„äººé€™å­¸æœŸæ­è¶´çš„Ù©ï¼ˆ â€˜Ï‰â€™ ï¼‰                                              |3     |https://www.dcard.tw/f/cgu/p/230842776-å°‹æ‰¾å¤±ç‰©-ç´„5cmçš„çš®å¡ä¸˜å¨ƒå¨ƒ                            |
|ï¼ˆæ­¹ç½·ç‹¼Xå­¸ç”Ÿæœƒï¼‰å¹¸ç¦è·¯ä¸Šæ”¾æ˜ åŠ æ¼”è¬›                   |é•·åºšå¤§å­¸        |å¹¸ç¦é€™æ¢è·¯ï¼Œè¸ä¸Šã„Œï¼Œè·ªè‘—ä¹Ÿè¦èµ°å®Œã€‚ï¼æ”¹å¯«è‡ªPeterSuï¼Œä»Šå¤©æ˜¯3æœˆ8æ—¥å©¦å¥³ç¯€ï¼Œä½ è½éæ—æ·‘çªé€™ä½å¥³å­©å—ï¼Ÿã€Šå¹¸ç¦è·¯ä¸Šã€‹æç¹ªä¸€ä½å°ç£å¥³å­©æ—æ·‘çªçš„æˆé•·æ•…äº‹ï¼Œä¹Ÿæ˜¯èªªè‘—ä¸€æ®µå°ç£çš„æ­·å²ã€‚ã€Œé‚£å€‹ç•¶åˆçš„æˆ‘ç¾åœ¨å¥½å—ï¼Ÿã€                                                |2     |https://www.dcard.tw/f/cgu/p/230842884-ï¼ˆæ­¹ç½·ç‹¼Xå­¸ç”Ÿæœƒï¼‰å¹¸ç¦è·¯ä¸Šæ”¾æ˜ åŠ æ¼”è¬›                   |
|æƒ³è«‹å•å·¥å•†ç³»çš„å¤§å¤§                                    |é•·åºšå¤§å­¸        |ä½ å€‘æœ‰ä¸€é–€èª²æ¯æ¬¡ä¸Šèª²éƒ½è¦ç©¿è¥¿è£é‚£æ˜¯ç¥éº¼èª²å•ŠğŸ¤”ğŸ¤£ï¼Ÿï¼Ÿï¼Ÿ                                                                                                                                                                                             |2     |https://www.dcard.tw/f/cgu/p/230842105-æƒ³è«‹å•å·¥å•†ç³»çš„å¤§å¤§                                    |
|æƒ³è«‹å•åŒ–æç³»çš„åŒå­¸                                    |é•·åºšå¤§å­¸        |è«‹å•æœ‰äººä¿®éåŠ‰ç¹¼è³¢è€å¸«é–‹çš„å¥ˆç±³ç”Ÿé†«æŠ€è¡“å—ï¼Ÿ                                                                                                                                                                                                     |3     |https://www.dcard.tw/f/cgu/p/230832306-æƒ³è«‹å•åŒ–æç³»çš„åŒå­¸                                    |
|èŠçˆ¾å¯Œç„¡æ³•é€è²¨                                        |é•·åºšå¤§å­¸        |é•·åºšèŠçˆ¾å¯Œæ˜¯ä¸æ˜¯ä¸èƒ½å–è²¨äº†ï¼Œæ±‚è§£                                                                                                                                                                                                               |3     |https://www.dcard.tw/f/cgu/p/230832299-èŠçˆ¾å¯Œç„¡æ³•é€è²¨                                        |
|è¿”é„‰å°ˆè»Š                                              |é•·åºšå¤§å­¸        |ç§‘å¤§é‚£é‚Šæœ‰é–‹è¿”é„‰å°ˆè»Šå“¦ï¼ï¼Œæ¸…æ˜ç¯€æƒ³å›å®¶çš„åŒå­¸ï¼Œå¿«é»å»å ±åå§ï¼ï¼Œå ±ååˆ°æ˜å¤©æˆªæ­¢ï½è¿”é„‰å°ˆè»Šå ±åé€²å…¥æœ€å¾Œä¸€å€‹æ˜ŸæœŸï¼Œç›®å‰å„è»Šå ±åç‹€æ³ï¼Œå°ä¸­ç«è»Šç«™ é¤˜21äººç™¼è»Šï¼Œå½°åŒ–ç«è»Šç«™ é¤˜7äººç™¼è»Š å¿«ç™¼è»Šäº†ï¼Œå°å—ç«è»Šç«™ é¤˜24äººç™¼è»Š                                      |15    |https://www.dcard.tw/f/cgu/p/230832142-è¿”é„‰å°ˆè»Š                                              |
|åµæ­»äº†                                                |é•·åºšå¤§å­¸        |æ˜å¾·ä¸ƒæ¨“èµ°å»Šåœ¨åµå±ï¼Ÿï¼Ÿä¸ç”¨ç¡è¦ºå“¦åµæ­»äº†                                                                                                                                                                                                         |5     |https://www.dcard.tw/f/cgu/p/230830088-åµæ­»äº†                                                |
|075-NEZ                                               |é•·åºšå¤§å­¸        |åŒå­¸ æ²’æˆ´å®‰å…¨å¸½å·²ç¶“è¢«æ‹ä¸‹ä¾†æª¢èˆ‰å›‰ï¼Œçˆ½ï¼ŒåˆæŠ“åˆ°ä¸€å€‹                                                                                                                                                                                              |36    |https://www.dcard.tw/f/cgu/p/230828876-075-NEZ                                               |
|å¤§ä¸€å­¸å¼Ÿï¼Œæ‹œè¨—å…ˆä¸è¦                                  |é•·åºšå¤§å­¸        |èº«ç‚ºä½åœ¨æ˜å¾·çš„è€äººï¼ŒçœŸå¿ƒå¸Œæœ›æ˜å¾·æ¨“çš„å­¸å¼Ÿå€‘å¯ä»¥åœ¨ç­‰é›»æ¢¯çš„æ™‚å€™é›¢é–€é ä¸€é»ï¼Œæ‹œè¨—è£¡é¢çš„äººéƒ½é‚„æ²’å‡ºä¾†ä½ ä¹Ÿä¸Šä¸å»å•Š...ï¼Œæ¯æ¬¡éƒ½è¦è²¼è‘—é–€ï¼Œç­‰åˆ°é–‹é–€çœ‹åˆ°è£¡é¢æœ‰äººæ‰è®“é–‹ï¼Œæ‹œè¨—ä¸è¦é€™æ¨£ï¼Œè »å›°æ“¾çš„ï¼Œï¼ˆè€Œä¸”ä¸æ˜¯å–®ä¸€å€‹æ¡ˆï¼Œé‡åˆ°å¥½å¤šæ¬¡äº†ï¼‰                          |26    |https://www.dcard.tw/f/cgu/p/230828825-å¤§ä¸€å­¸å¼Ÿï¼Œæ‹œè¨—å…ˆä¸è¦                                  |
|æ±‚ç§Ÿå¥—æˆ¿æ¨è–¦#é•·åºšé†«é™¢#A8æ·é‹ç«™#è¯äºç§‘å­¸åœ’å€           |é•·åºšå¤§å­¸        |å¤§å®¶å¥½ï¼Œæœ€è¿‘ç•¢æ¥­åœ¨æ—å£æ‰¾åˆ°å·¥ä½œæƒ³è¦åœ¨é™„è¿‘ç§Ÿæˆ¿å­ï¼Œæ®Šä¸çŸ¥æ—å£ç§Ÿæˆ¿çš„ç¶²è·¯è³‡è¨ŠçœŸçš„å°‘çš„å¯æ†ï¼Œæ‰€ä»¥æƒ³ä¸Šä¾†è©¢å•ç‰ˆå‹å€‘æœ‰æ²’æœ‰æ¨è–¦çš„ç§Ÿå±‹è³‡è¨Šå¯ä»¥è®“æˆ‘åƒè€ƒï¼Œæ‹œè¨—å¤§å®¶äº†                                                                                         |7     |https://www.dcard.tw/f/cgu/p/230826850-æ±‚ç§Ÿå¥—æˆ¿æ¨è–¦ï¼ƒé•·åºšé†«é™¢ï¼ƒA8æ·é‹ç«™ï¼ƒè¯äºç§‘å­¸åœ’å€        |
|ä¸€é†«é äºŒé†«å»æ‰€çš„å¥³ç”Ÿ                                  |é•·åºšå¤§å­¸        |å¯ä»¥è«‹å¦³å€‘å®‰éœä¸€é»å—ï¼Œä¸€ç›´é›…ç´”çš„å–Š æ•™æˆåœ¨ä¸Šèª²ä½ å€‘çŸ¥é“å—ï¼Œèº«æå¾ˆå£¯çš„é‚£å€‹å¥³ç”Ÿå°±æ˜¯åœ¨èªªä½ å€‘ï¼Œæœ‰é»åŠŸå¾·å¿ƒ                                                                                                                                            |12    |https://www.dcard.tw/f/cgu/p/230825754-ä¸€é†«é äºŒé†«å»æ‰€çš„å¥³ç”Ÿ                                  |
|ç”·æœ‹å‹                                                |é•·åºšå¤§å­¸        |æœ€è¿‘èº«é‚Šçš„æœ‹å‹éƒ½ä¸€å€‹å€‹äº¤åˆ°ç”·æœ‹å‹ï¼Œè¦å¦‚ä½•æ‰èƒ½äº¤åˆ°ç†æƒ³çš„ç”·å‹å‹’ï¼Ÿ                                                                                                                                                                                 |24    |https://www.dcard.tw/f/cgu/p/230822815-ç”·æœ‹å‹                                                |
|ç”·æœ‹å‹                                                |é•·åºšå¤§å­¸        |æœ€è¿‘èº«é‚Šçš„æœ‹å‹éƒ½ä¸€å€‹å€‹äº¤åˆ°ç”·æœ‹å‹ï¼Œè¦å¦‚ä½•æ‰èƒ½äº¤åˆ°ç†æƒ³çš„ç”·å‹å‹’ï¼Ÿ                                                                                                                                                                                 |6     |https://www.dcard.tw/f/cgu/p/230822813-ç”·æœ‹å‹                                                |
|é»å æ› èª²                                             |é•·åºšå¤§å­¸        |ä¸Šæ˜ŸæœŸç‚ºäº†æ—©é»å›å®¶ç¿¹äº†èª²ï¼Œä¸å·§é‡ä¸Šè€å¸«é»åã€‚æƒ³è«‹å•ä¸€ä¸‹è€å¸«è¨˜æ› èª²åœ¨ç¶²è·¯ä¸Šé¡¯ç¤ºå‡ºä¾†å¤§æ¦‚è¦å¤šä¹…ï¼Ÿå› ç‚ºçœ‹äº†å¥½å¹¾æ¬¡éƒ½æ²’é¡¯ç¤ºï¼Œä¸ç¢ºå®šåˆ°åº•è¦ä¸è¦è«‹å‡é‚„æ˜¯è€å¸«è¨˜è‡ªå·±æ‰£åˆ†çš„ã€‚åŒå­¸æ˜¯èªªè€å¸«ç›´æ¥åœ¨æ ¡å‹™è³‡è¨Šç³»çµ±ä¸Šç™»è¨˜æ› èª²ï¼Œæˆ‘çš„ç¶²é çœ‹èµ·ä¾†æ˜¯é€™æ¨£çš„                 |5     |https://www.dcard.tw/f/cgu/p/230822646-é»å-æ› èª²                                             |
|å¤§å¥¶å­å‚³å¥‡                                            |é•·åºšå¤§å­¸        |å‰›å‰›åœ¨é™¢å€ï¼Œå°é¢èµ°éä¾†ä¸€ç¾¤äººï¼Œå…¶ä¸­ä¸€å€‹å°±æŒ‡è‘—å°é¢çš„å¤§è‹‘å­ï¼Œå¤§å–Šï¼Œå¤§å¥¶å­å¤§å¥¶å­å¤§å¥¶å­~ï¼Œå…¶ä»–äººä¹Ÿè·Ÿè‘—èµ·é¬¨ï¼Œéƒ½ä¸çŸ¥é“ç¾åœ¨é•·åºšå­¸ç”Ÿç´ è³ªé‚£éº¼ä½èª’ğŸ¤¨                                                                                                       |43    |https://www.dcard.tw/f/cgu/p/230821401-å¤§å¥¶å­å‚³å¥‡                                            |
|ç†æ€§                                                  |é•·åºšå¤§å­¸        |é¦–å…ˆè²æ˜ï¼Œæˆ‘éå¸¸å–œæ­¡ç¾åœ¨çš„å­¸ç”Ÿæœƒæ°£æ°›ã€‚æˆ‘çŸ¥é“é€™è£¡æ˜¯åŒ¿åç™¼è¨€ï¼Œæ‰€ä»¥ç­‰ç­‰åº•ä¸‹ä¸€å®šæœƒæœ‰ä¸€å †ä¸ç†æ€§ç™¼è¨€ï¼Œç†æ€§è€…è¿´é¿å³å¯ã€‚ç¤™æ–¼æˆ‘çš„èº«åˆ†æˆ‘ä¸ä¾¿ç›´æ¥å¯†ç²‰å°ˆæˆ–ç•™è¨€ï¼Œæ‰€ä»¥ç”¨é€™ç¨®æœ€ä¸æ‡‰è©²çš„åŒ¿åæ–¹å¼ï¼Œè«‹è¦‹è«’ã€‚poæ–‡ç›®çš„åªæ˜¯æƒ³è¦å­¸ç”Ÿæœƒèƒ½çœ‹è¦‹ï¼Œä¸æ˜¯è¦å¤§å®¶ç­†æˆ°å‚·æ„Ÿæƒ…ã€‚ |31    |https://www.dcard.tw/f/cgu/p/230820941-ç†æ€§                                                  |
|ä½ çš„å­¸ç”Ÿè­‰                                            |é•·åºšå¤§å­¸ é†«å­¸ç³» |ä½ æ‰äº†ä½ çš„å­¸ç”Ÿè­‰ï¼Œä½†æˆ‘æ²’ç©ºå¹«ä½ æ‹¿å»å­¸å‹™è™•ï¼Œè«‹è‡ªè¡Œé ˜å›                                                                                                                                                                                           |9     |https://www.dcard.tw/f/cgu/p/230820786-ä½ çš„å­¸ç”Ÿè­‰                                            |
|é€šè­˜åŠ ç°½å•é¡Œ                                          |é•·åºšå¤§å­¸        |ä¹³é¡Œï¼Œæˆ‘è¨˜å¾—ä»¥å‰é€šè­˜æ˜¯å¯ä»¥åŠ ç°½çš„ï¼Œç¾åœ¨è½èªªä¸çµ¦åŠ ç°½ï¼Ÿï¼ï¼Œç”šè‡³æ˜¯å¦‚æœé¸èª²äººæ•¸æœªé”ä¸Šé™ä¹Ÿä¸çµ¦éæ˜¯å—ï¼Œæœ‰æ²’æœ‰å…«å¦å‘€ï¼Œç¥­å“å˜›ï¼Œé™„ä¸Šä¸€éš»å–µå–µ                                                                                                             |7     |https://www.dcard.tw/f/cgu/p/230820366-é€šè­˜åŠ ç°½å•é¡Œ                                          |
|äººåœ¨åšå¤©åœ¨çœ‹                                          |é•·åºšå¤§å­¸        |ç´ è³ªé€™éº¼ä½é‚„æƒ³é¨è»Šå‡ºå»å•Šï¼Œæœ‰æ²’æœ‰æ‘©æ‰˜è»Šå‰›å¥½è¢«é–çš„æ›                                                                                                                                                                                             |25    |https://www.dcard.tw/f/cgu/p/230819860-äººåœ¨åšå¤©åœ¨çœ‹                                          |
|ç‚ºä»€éº¼å­¸æ ¡æ”¶ä¿¡éƒ½æ”¶é‚£éº¼ä¹…ï¼Ÿ                            |é•·åºšå¤§å­¸        |å‘ƒ...å¦‚é¡Œï¼Œç‚ºä»€éº¼å­¸æ ¡æ¯æ¬¡æ”¶åˆ°ä¿¡çš„æ™‚é–“éƒ½æ¯”åŒæ¨£å¯„å‡ºæ™‚é–“ä¸éæ˜¯å¯„å®¶è£¡çš„é‚„è¦å¤šè‡³å°‘ä¸€å€‹ç¦®æ‹œå‘¢ï¼Ÿç¢ºå®šæˆ‘æ²’æœ‰å¡«å®¿èˆä¹Ÿä¸æ˜¯æ›è™Ÿä¹Ÿä¸æ˜¯åŒ…è£¹ï¼Œæˆ‘å›ºå®šå¡«ï¼š333æ¡ƒåœ’å¸‚é¾œå±±å€æ–‡åŒ–ä¸€è·¯259è™Ÿï¼Œèˆ‰ä¾‹ï¼šåŒæ¨£2/22å¾ä¸­å£¢å¯„å‡ºçš„æˆç¸¾å–®                                        |4     |https://www.dcard.tw/f/cgu/p/230819457-ç‚ºä»€éº¼å­¸æ ¡æ”¶ä¿¡éƒ½æ”¶é‚£éº¼ä¹…ï¼Ÿ                            |
|å‡ºåœ‹è®€ç ”                                              |é•·åºšå¤§å­¸        |æƒ³è«‹å•ä¸€ä¸‹å¤§å®¶ï¼Œé•·åºšå·¥å­¸é™¢çš„ç§‘ç³»å»å¤–åœ‹è®€ç ”ç©¶æ‰€çš„äººå¤šå—ï¼Ÿæœƒä¸æœƒå¾ˆé›£ç”³è«‹ï¼Ÿæˆ‘å»ç¶²è·¯ä¸Šæ‰¾åŸºæœ¬ä¸Šéƒ½åªçœ‹åˆ°äº¤æ›å­¸ç”Ÿçš„å¿ƒå¾—ï¼Œç„¶å¾Œå¦‚æœè¦ºå¾—é€™æ˜¯ä¼¸æ‰‹æ–‡çš„è©±å¾ˆæŠ±æ­‰ï¼Œä½†æ˜¯å¦‚æœå¤§å®¶çŸ¥é“ä¸€äº›è³‡è¨Šç„¶å¾Œé¡˜æ„åˆ†äº«çš„è©±æˆ‘å¾ˆæ„Ÿæ¿€ï¼Œè¬è¬                                     |4     |https://www.dcard.tw/f/cgu/p/230819446-å‡ºåœ‹è®€ç ”                                              |
|æœ‰äººéºå¤±å­¸ç”Ÿè­‰                                        |é•·åºšå¤§å­¸        |è«‹èªè­˜ä»–çš„é„‰è¦ªçˆ¶è€å…„å¼Ÿå§å¦¹å€‘ï¼Œæé†’ä»–å­¸ç”Ÿè­‰æˆ‘å·²æ‹¿åˆ°æ•™å‹™è™•                                                                                                                                                                                       |1     |https://www.dcard.tw/f/cgu/p/230819048-æœ‰äººéºå¤±å­¸ç”Ÿè­‰                                        |
|å”å°‹æ‰‹æ©Ÿ                                              |é•·åºšå¤§å­¸        |å¦‚æ¨™é¡Œ  æˆ‘æœ‹å‹çš„æ‰‹æ©Ÿæ‰åœ¨é™¢å€ï¼Œæ‰¾ä¸åˆ°æ±‚å¦‚æœæœ‰å¥½å¿ƒäººæ’¿åˆ°ï¼Œè«‹æ‰“é€™éš»æ‰‹æ©Ÿ  0963973209ï¼Œæ‰‹æ©Ÿæ˜¯i6ï¼ŒèƒŒæ®¼åœ–æ¡ˆæ˜¯ä¸Šåœ–é»ƒè‰²çš„èƒŒæ®¼ï¼Œæ‹œè¨—å¤§å®¶                                                                                                                 |8     |https://www.dcard.tw/f/cgu/p/230818287-å”å°‹æ‰‹æ©Ÿ                                              |
|æ˜å¾·äº”æ¨“çš„å¤§æ£’æ£’ æ‹œè¨—é‚„æˆ‘è¤²å­å§                       |é•·åºšå¤§å­¸        |å°å¼Ÿ3/4å¤§ç´„å‡Œæ™¨åäºŒé»å¤šçƒ˜å®Œè¡£æœï¼ˆå³é‚Šé‚£å°ï¼‰ï¼Œä¸€ä»¶levisæ·¡è—è‰²çš„ç‰›ä»”è¤²å°±ä¸è¦‹äº†ï¼Œæ‹œè¨—é‚£å€‹å–„å¿ƒäººå£«æŠŠè¤²å­é‚„çµ¦æˆ‘ï¼Œéå¸¸æ„Ÿè¬ä½ å¹«æˆ‘æŠŠè¡£æœæ‹¿å‡ºä¾†ï¼Œä½†ä½ æ”¶çš„è²»ç”¨ä¹Ÿå¤ªè²´äº†å§                                                                                 |18    |https://www.dcard.tw/f/cgu/p/230813931-æ˜å¾·äº”æ¨“çš„å¤§æ£’æ£’-æ‹œè¨—é‚„æˆ‘è¤²å­å§                       |
|ç·šä¸Šç°½æ ¸ç³»çµ±                                          |é•·åºšå¤§å­¸        |å› ç‚ºç³»ä¸Šçš„èª²ç¨‹èª¿å‹•æ‰€ä»¥è¦å¦å¤–å€Ÿæ•™å®¤ï¼Œå¯æ˜¯åœ¨ç³»çµ±è¦é¸æ—¥æœŸçš„æ™‚å€™éƒ½é¡¯ç¤ºä¸é–‹æ”¾å€Ÿç”¨ï¼Œå·²ç¶“ç¢ºèªè©²æ—¥æœŸè©²æ™‚æ®µç‚ºç©ºå ‚äº†ï¼ˆTï¼¿Tï¼‰ï¼Œæ—¥æœŸä¹Ÿç¢ºå¯¦æ˜¯å€Ÿç”¨æ—¥å…©å¤©ä¹‹å¾Œï¼Œåˆ°åº•æ˜¯å“ªè£¡å‡ºå•é¡Œ                                                                               |2     |https://www.dcard.tw/f/cgu/p/230811188-ç·šä¸Šç°½æ ¸ç³»çµ±                                          |
|æˆç¸¾å–®é›»å­ç‰ˆ                                          |é•·åºšå¤§å­¸        |è«‹å•å­¸æ ¡çš„æˆç¸¾å–®å¯ä»¥ç”³è«‹é›»å­ç‰ˆçš„å—ï¼Ÿé‚„æ˜¯ä¸€å®šè¦è‡ªå·±æƒæåˆ°é›»è…¦ï¼Ÿ                                                                                                                                                                                 |5     |https://www.dcard.tw/f/cgu/p/230809659-æˆç¸¾å–®é›»å­ç‰ˆ                                          |
|åŒå­¸ä½ çš„æ©Ÿè»Šé‘°åŒ™                                      |é•·åºšå¤§å­¸        |åŒå­¸ä½ çš„æ©Ÿè»Šé‘°åŒ™æ²’æ‹” å¹«ä½ æ‹”èµ·ä¾†æ”¾åœ¨å‰é¢å›‰ï¼ˆè€Œä¸”é‚„é–‹è‘—é›»                                                                                                                                                                                        |7     |https://www.dcard.tw/f/cgu/p/230807949-åŒå­¸ä½ çš„æ©Ÿè»Šé‘°åŒ™                                      |
|è«‹ç›Š é™³ä¸–å¿  æºé€šæŠ€å·§èˆ‡é ˜å°çµ±å¾¡                        |é•·åºšå¤§å­¸        |æ˜ŸæœŸäº”æ‰åŠ é¸åˆ°é™³ä¸–å¿ è€å¸«çš„æºé€šæŠ€å·§ï¼Œè«‹å•å„ä½æœ‰ä¿®èª²çš„åŒå­¸ï¼Œå‰å…©å€‹ç¦®æ‹œæœ‰ä»€éº¼ä¸Šèª²æ³¨æ„äº‹é …æˆ–æ˜¯è¦è²·èª²æœ¬åšä½œæ¥­åˆ†çµ„ä¹‹é¡çš„å—ï¼Ÿç¥å¥½å¿ƒäººæœŸæœ«æ­è¶´Ê•â€¢ï»Œâ€¢Ê”                                                                                                    |9     |https://www.dcard.tw/f/cgu/p/230806270-è«‹ç›Š-é™³ä¸–å¿ -æºé€šæŠ€å·§èˆ‡é ˜å°çµ±å¾¡                        |
|666                                                   |é•·åºšå¤§å­¸        |åŒå­¸ åŸä¾†é•·åºšçš„éœ§é€™éº¼å¤§ å‚»å‚»åˆ†ä¸æ¸…æ¥š                                                                                                                                                                                                           |33    |https://www.dcard.tw/f/cgu/p/230805443-666                                                   |
|ç‚ºä»€éº¼æ ¡è»Šéƒ½è¦ç­‰è¶…ä¹…ï¼Ÿ                                |é•·åºšå¤§å­¸        |å¦‚é¡Œ è‡³å°‘åŠå°æ™‚æ˜¯åŸºæœ¬ æœ‰æ™‚å€™ç›´æ¥ç­‰äº†å¿«ä¸€å°æ™‚éƒ½æ²’è»Š å¸æ©Ÿæ˜¯å»åƒé£¯äº†å—ï¼Ÿ                                                                                                                                                                          |19    |https://www.dcard.tw/f/cgu/p/230798848-ç‚ºä»€éº¼æ ¡è»Šéƒ½è¦ç­‰è¶…ä¹…ï¼Ÿ                                |
|æœ‰è›‡æ³¨æ„                                              |é•·åºšå¤§å­¸        |æ—©ä¸Šè·¯éæ“šå¾·çƒå ´æ—æ–œå¡ï¼Œå¤§å®¶èµ°è·¯å°å¿ƒæ³¨æ„è…³é‚Š                                                                                                                                                                                                   |50    |https://www.dcard.tw/f/cgu/p/230796900-æœ‰è›‡æ³¨æ„                                              |
|è·Ÿå¤§å­¸åŒå­¸éƒ½è©²èŠäº›ä»€éº¼                                |é•·åºšå¤§å­¸        |é«˜ä¸­æ™‚ç¸½æ˜¯ç‰¹åˆ¥æ†§æ†¬å¤§å­¸ç”Ÿæ´»ï¼Œèªç‚ºèƒ½æ“æœ‰è¨±å¤šè‡ªç”±ï¼Œæƒ³è«‹å•å¤§å®¶åœ¨å­¸æ ¡éƒ½è·Ÿå¤§å­¸åŒå­¸èŠäº›ä»€éº¼ï¼Ÿ                                                                                                                                                         |20    |https://www.dcard.tw/f/cgu/p/230794540-è·Ÿå¤§å­¸åŒå­¸éƒ½è©²èŠäº›ä»€éº¼                                |
|é¸èª²å¿«è¦çµæŸäº†å•Šå•Šå•Š                                  |é•·åºšå¤§å­¸        |å¤§å®¶å¯ä»¥å»çœ‹ä¸€ä¸‹èª²è¡¨ï¼Œç¢ºä¿æœ‰å¿˜è¨˜æ¨æ‰çš„èª²å”·ï¼ä¸ç„¶è¦ç­‰æœŸä¸­æ‰èƒ½åœä¿®å›‰ï¼ˆåƒæˆ‘ä¸Šæ¬¡ä¸€æ¨£ï¼Œä¸”åªèƒ½åœä¸€ç§‘ï¼Œé‚„è¦ç¶­æŒæœ€ä½å¤§ä¸‰ä»¥ä¸‹12å­¸åˆ†ï¼‰ï¼Œç¬¬åé€±æœŸä¸­åœä¿®å¾Œï¼š1.ä¸‹å­¸æœŸä¸èƒ½è¶…ä¿®25å­¸åˆ†ï¼Œ2.ä¹Ÿä¸èƒ½é ˜ç•¶å­¸æœŸçš„çå­¸é‡‘                                               |23    |https://www.dcard.tw/f/cgu/p/230792348-é¸èª²å¿«è¦çµæŸäº†å•Šå•Šå•Š                                  |

    
çˆ¬èŸ²ç·´ç¿’
====================================
type:alert

- [Ptt Tech_Job ç‰ˆ](https://www.ptt.cc/bbs/Tech_Job/index.html)
- è©¦è‘—çˆ¬å‡ºæ‰€æœ‰**æ¨™é¡Œ**
- çˆ¬å‡ºçš„ç¬¬ä¸‰å€‹æ¨™é¡Œæ˜¯ï¼Ÿ


ç¶²é çˆ¬èŸ² å†æƒ³æƒ³ï¼Ÿ
====================================
incremental:true

- å¦‚ä½•çˆ¬è©•è«–è·Ÿå…§æ–‡å‘¢ï¼Ÿ
- å…¶å¯¦...DCardæ˜¯æœ‰APIçš„
    - https://www.dcard.tw/_api/forums/cgu/posts
    - https://www.dcard.tw/_api/posts/225917717
    - https://www.dcard.tw/_api/posts/225917717/comments
- éš±ç§å•é¡Œ ï¼ˆOkCupidäº‹ä»¶ï¼‰
    - [70,000 OkCupid Users Just Had Their Data Published](https://motherboard.vice.com/en_us/article/70000-okcupid-users-just-had-their-data-published)

é€²éšçˆ¬èŸ²
====================================
- CSS Selector èªæ³•ä»‹ç´¹ [åƒè€ƒè³‡æ–™](https://www.w3schools.com/cssref/css_selectors.asp)
    - **.**xxxï¼šselect elements with class="xxx"
    - **#**xxxï¼šselect elements with id="xxx"
    - **[**yyy**]**ï¼šselect elements with attribute yyy
    - **[**yyy=zzz**]**ï¼šselect elements with attribute yyy="zzz"
    
- ç€‘å¸ƒå¼ç¶²é çˆ¬èŸ²
    - è§€å¯ŸGoogle Chrome é–‹ç™¼è€…å·¥å…·ï¼Œåœ¨Networkå…§æ‰¾åˆ°apiå‘¼å«æ–¹å¼
    - æ­é…ä½¿ç”¨RSelenium æ¨¡æ“¬ç€è¦½ç‹€æ…‹ [DCardå¯¦ä½œR Code](https://github.com/CGUIM-BigDataAnalysis/BigDataCGUIM/blob/master/105/RSelenium_rvest.md)


å…¶ä»–çˆ¬èŸ²ç›¸é—œåƒè€ƒè³‡æº
====================================
- [ç¶²è·¯çˆ¬èŸ²å¯¦ä½œ - ç”¨ r èªè¨€æ‰“é€ è‡ªå·±çš„çˆ¬èŸ²ç¨‹å¼](https://www.slideshare.net/secret/mdfHLPgvIW1kPR)
- [rvest GitHub](https://github.com/hadley/rvest)
- R Bloggers æœ‰å¾ˆå¤š[çˆ¬èŸ²ç¯„ä¾‹](http://www.r-bloggers.com/?s=Web+Scraping)ï¼ˆè‹±æ–‡ï¼‰
- [Pttçˆ¬èŸ²å¯¦ä½œ](http://bryannotes.blogspot.tw/2014/08/r-ptt-wantedsocial-network-analysis.html)
- [å¤§æ•¸å­¸å ‚ ç¶²é çˆ¬èŸ²èª²ç¨‹](http://www.largitdata.com/course_list/1)


å¾FacebookåŒ¯å…¥
====================================
type:section
- Graph API in R
- Rfacebook package

Graph API in R
====================================
type:sub-section

- åœ¨2018å¹´çš„é¢¨æ³¢å¾Œï¼ŒGraph APIè‹¥è¦ç”¨åœ¨çˆ¬å–å…¬é–‹ç²‰å°ˆï¼Œé ˆç¶“éFBå¯©æ ¸
- [Graph API](https://developers.facebook.com/docs/graph-api?locale=zh_TW)
    - æ ¹æ“šç¯©é¸æ¢ä»¶ï¼Œå›å‚³JSONæ ¼å¼çš„è³‡æ–™
- [Graph API Explorer](https://developers.facebook.com/tools/explorer/)
    - æ¸¬è©¦è³‡æ–™æ’ˆå–æ–¹æ³•å’Œçµæœ
- å¿…é ˆè¦å–å¾—è‡ªå·±çš„**access token** (å­˜å–æ¬Šæ–)
    - å¯åœ¨[Graph API Explorer](https://developers.facebook.com/tools/explorer/)è¦–çª—å³ä¸Šè§’çš„**Get Token**æŒ‰éˆ•å–å¾—
    - [å®˜æ–¹æ–‡ä»¶](https://developers.facebook.com/docs/facebook-login/access-tokens/?locale=zh_TW)


Rfacebook package
====================================
type:sub-section
åœ¨2018å¹´çš„é¢¨æ³¢å¾Œï¼ŒGraph APIè‹¥è¦ç”¨åœ¨çˆ¬å–å…¬é–‹ç²‰å°ˆï¼Œé ˆç¶“éFBå¯©æ ¸ï¼Œå› æ­¤æœ¬èª²ç¨‹ç›®å‰ç„¡æ³•ç¤ºç¯„ç²‰çµ²å°ˆé çˆ¬å–

ä½¿ç”¨ Rfacebook å–å¾— `tsaiingwen` ç²‰çµ²é çš„è³‡æ–™

```r
library(Rfacebook) #åˆæ¬¡ä½¿ç”¨é ˆå…ˆå®‰è£
token<-"your token" #å°‡tokenè¤‡è£½åˆ°æ­¤è™•
getPage("tsaiingwen", token,n = 5)
```
è‹¥ç¶“éå¯©æ ¸ï¼Œå¯å¾—ä¸‹åˆ—çµæœ

```
4 posts       from_id           from_name
1 46251501064 è”¡è‹±æ–‡ Tsai Ing-wen
2 46251501064 è”¡è‹±æ–‡ Tsai Ing-wen
3 46251501064 è”¡è‹±æ–‡ Tsai Ing-wen
4 46251501064 è”¡è‹±æ–‡ Tsai Ing-wen
```

å¾TwitteråŒ¯å…¥
====================================
type:section
- Twitter API
- rtweet package

Twitter API
====================================
- https://developer.twitter.com/en/apps
- éœ€æœ‰Twitterå¸³è™Ÿä¸¦é€šéé–‹ç™¼è€…å¯©æ ¸

rtweet package
====================================

```r
## install rtweet from CRAN
install.packages("rtweet")
## load rtweet package
library(rtweet)
```

rtweet package - token è¨­å®š
====================================

```r
library(rtweet)
create_token(
  app = "teach0309",
  consumer_key = "Wbba6ysyPKGstGAqohmtyWZOE",
  consumer_secret = "GJweDzVvXGrbjz26bHTr3d6dFI7q9gFCH98f3Ct2yk3APPWigc",
  access_token = "216362944-VbXiYOjGtENwSI6eJ9AoDK5OVvoQWlj7yIeXraGt",
  access_secret = "jnfDCvuMdxdmxswUUPPi3gomxIWZq3BTdumykLJb7GW5A")
```

```
<Token>
<oauth_endpoint>
 request:   https://api.twitter.com/oauth/request_token
 authorize: https://api.twitter.com/oauth/authenticate
 access:    https://api.twitter.com/oauth/access_token
<oauth_app> teach0309
  key:    Wbba6ysyPKGstGAqohmtyWZOE
  secret: <hidden>
<credentials> oauth_token, oauth_token_secret
---
```

rtweet package - æœå°‹hashtag
====================================

```r
## search for 3000 tweets using the northkorea hashtag
rt <- search_tweets(
  "#northkorea", n = 3000, include_rts = FALSE
)
head(rt)
```

|user_id    |status_id           |created_at          |screen_name     |
|:----------|:-------------------|:-------------------|:---------------|
|22697810   |1104073627983597568 |2019-03-08 17:37:20 |StimsonCenter   |
|1279628114 |1104073183668260864 |2019-03-08 17:35:34 |Cluelessoracle  |
|1279628114 |1103381604288716800 |2019-03-06 19:47:28 |Cluelessoracle  |
|2845987205 |1104073079951630337 |2019-03-08 17:35:09 |IamJPHogan      |
|14375047   |1103435321562284033 |2019-03-06 23:20:56 |davidbrunnstrom |
|14375047   |1102767558875324416 |2019-03-05 03:07:29 |davidbrunnstrom |

rtweet package - æœå°‹hashtag
====================================
![plot of chunk unnamed-chunk-22](EMBA_PipelinesForDataAnalysisInR2-figure/unnamed-chunk-22-1.png)

rtweet package - å–å¾—è¶¨å‹¢
====================================

```r
sf <- get_trends("Japan")
head(sf)
```

|trend  |url                                                     |promoted_content |query                       |
|:------|:-------------------------------------------------------|:----------------|:---------------------------|
|éœ‡åº¦3  |http://twitter.com/search?q=%E9%9C%87%E5%BA%A63         |NA               |%E9%9C%87%E5%BA%A63         |
|ã‚«ãƒ¡ãƒ© |http://twitter.com/search?q=%E3%82%AB%E3%83%A1%E3%83%A9 |NA               |%E3%82%AB%E3%83%A1%E3%83%A9 |
|éœ‡åº¦4  |http://twitter.com/search?q=%E9%9C%87%E5%BA%A64         |NA               |%E9%9C%87%E5%BA%A64         |
|éœ‡åº¦2  |http://twitter.com/search?q=%E9%9C%87%E5%BA%A62         |NA               |%E9%9C%87%E5%BA%A62         |

rtweet package - å–å¾—timeline
====================================

```r
tmls <- get_timelines(c("realDonaldTrump", "BarackObama"), n = 3000)
head(tmls)
```

|user_id  |screen_name     |text                                                                                                                                                                                                                                                                                    |source             |
|:--------|:---------------|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:------------------|
|25073877 |realDonaldTrump |Bad lawyer and fraudster Michael Cohen said under sworn testimony that he never asked for a Pardon. His lawyers totally contradicted him. He lied! Additionally, he directly asked me for a pardon. I said NO. He lied again! He also badly wanted to work at the White House. He lied! |Twitter for iPhone |
|25073877 |realDonaldTrump |Heading now to the Great State of Alabama!                                                                                                                                                                                                                                              |Twitter for iPhone |
|25073877 |realDonaldTrump |On International Womenâ€™s Day, we honor women worldwide for their vital role in shaping and strengthening our communities, families, governments, and businesses...https://t.co/VVnkuBPmhA                                                                                               |Twitter for iPhone |
|25073877 |realDonaldTrump |Womenâ€™s unemployment rate is down to 3.6% - was 7.9% in January, 2011. Things are looking good!                                                                                                                                                                                         |Twitter for iPhone |
|25073877 |realDonaldTrump |We are apprehending record numbers of illegal immigrants - but we need the Wall to help our great Border Patrol Agents!                                                                                                                                                                 |Twitter for iPhone |
|25073877 |realDonaldTrump |â€œThis is as good a time as I can remember to be an American Worker. We have the strongest economy in the world.â€  Stuart Varney @foxandfriends  So true!                                                                                                                                |Twitter for iPhone |

rtweet package - å–å¾—timeline
====================================
![plot of chunk unnamed-chunk-27](EMBA_PipelinesForDataAnalysisInR2-figure/unnamed-chunk-27-1.png)


rtweet package - å–å¾—followers
====================================

```r
## get user IDs of accounts following è”¡è‹±æ–‡ Tsai Ing-wen
iingwen_flw <- get_followers("iingwen", n = 1000)
## lookup data on those accounts
iingwen_flw_data <- lookup_users(iingwen_flw$user_id)
head(iingwen_flw_data)
```



rtweet packageç·´ç¿’
====================================
type:alert
incremental:true
- è¤‡è£½è€å¸«çš„Twitter access token
- ä½¿ç”¨rtweet packageå–å¾—**è”¡è‹±æ–‡ Tsai Ing-wen**(iingwen)çš„timelineï¼Œå…±50ç­†tweets
- ç¬¬ä¸€ç­†è³‡æ–™çš„retweet_countæ˜¯å¤šå°‘?
- ç¬¬äºŒç­†è³‡æ–™çš„favorite_countæ˜¯å¤šå°‘?


è³‡æ–™åŒ¯å‡º
====================================
type:section
- æ–‡å­—æª” .txt
- CSVæª” .csv
- Rç‰©ä»¶ .rds


æ–‡å­—æª” .txt write.table()
====================================
type:sub-section


```r
write.table(iris,file="iris.txt",sep=",",
            row.names = F,col.names = T)
```
- è¦åŒ¯å‡ºçš„è³‡æ–™
- `file` æª”æ¡ˆåç¨±
- `append` T/F T:åœ¨æª”æ¡ˆå¾ŒåŠ å­—ï¼ŒF:ç›´æ¥è¦†è“‹æª”æ¡ˆ (é è¨­F)
- `quote` æ˜¯å¦éœ€è¦ç”¨é›™å¼•è™Ÿå°‡å­—ä¸²åŒ…èµ· (é è¨­T)
- `sep` åˆ†éš”ç¬¦è™Ÿ (é è¨­ç©ºç™½)
- `row.names` T/F æ˜¯å¦éœ€è¦è¼¸å‡ºrow names
- `col.names` T/F æ˜¯å¦éœ€è¦è¼¸å‡ºcolumn names
- `fileEncoding` ç·¨ç¢¼è¨­å®š


CSVæª” .csv
====================================
type:sub-section

èˆ‡`write.table()`é¡ä¼¼ï¼Œä½¿ç”¨`write.csv()`å‡½æ•¸å¯«å…¥æª”æ¡ˆ

```r
write.csv(iris,file="iris.csv",row.names = F)
```

Rç‰©ä»¶ .rds
====================================
type:sub-section

è‹¥æ˜¯è¦åœ¨Rçš„ç’°å¢ƒç¹¼çºŒä½¿ç”¨ï¼Œå»ºè­°åŒ¯å‡ºæˆRç‰©ä»¶æª”æ¡ˆ(.rds)

```r
saveRDS(iris,"iris.rds")
```


è³‡æ–™æ¸…æ´—èˆ‡è™•ç†
====================================
- Tidy Data
- è³‡æ–™å‹åˆ¥è½‰æ›è™•ç†
- æ–‡å­—å­—ä¸²è™•ç†
- å­é›†Subset
- æ’åº
- è³‡æ–™çµ„åˆ
- é•·è¡¨èˆ‡å¯¬è¡¨

Tidy Data
====================================
type:sub-section 

Each column is a variable. Each row is an observation.

- ä¸€å€‹æ¬„ä½ï¼ˆColumnï¼‰å…§åªæœ‰ä¸€å€‹æ•¸å€¼ï¼Œæœ€å¥½è¦æœ‰å‡¡äººçœ‹å¾—æ‡‚çš„Column Name
- ä¸åŒçš„è§€å¯Ÿå€¼æ‡‰è©²è¦åœ¨ä¸åŒè¡Œï¼ˆRowï¼‰
- ä¸€å¼µè¡¨è£¡é¢ï¼Œæœ‰æ‰€æœ‰åˆ†æéœ€è¦çš„è³‡æ–™
- å¦‚æœä¸€å®šè¦å¤šå¼µè¡¨ï¼Œä¸­é–“ä¸€å®šè¦æœ‰indexå¯ä»¥æŠŠè¡¨ä¸²èµ·ä¾†
- One file, one table

è³‡æ–™å‹åˆ¥è½‰æ›è™•ç†
====================================
type:sub-section 
åŒ…æ‹¬**è³‡æ–™å‹åˆ¥æª¢æŸ¥**èˆ‡**è³‡æ–™å‹åˆ¥è½‰æ›**

è³‡æ–™å‹åˆ¥:

- æ•¸å€¼ (numeric)
- å­—ä¸² (character)
- å¸ƒæ—è®Šæ•¸ (logic)
- æ—¥æœŸ (Date)


è³‡æ–™å‹åˆ¥æª¢æŸ¥ - is.
====================================
ä½¿ç”¨`is.`å‡½æ•¸æª¢æŸ¥è³‡æ–™å‹åˆ¥ï¼Œå›å‚³å¸ƒæ—è®Šæ•¸ï¼Œè‹¥ç‚º**çœŸ**ï¼Œå›å‚³**TRUE**

- æ˜¯å¦ç‚º**æ•¸å­—** `is.numeric(è®Šæ•¸åç¨±)`
- æ˜¯å¦ç‚º**æ–‡å­—** `is.character(è®Šæ•¸åç¨±)`
- æ˜¯å¦ç‚º**å¸ƒæ—è®Šæ•¸** `is.logical(è®Šæ•¸åç¨±)`


```r
num<-100
is.numeric(num)
```

```
[1] TRUE
```

```r
is.character(num)
```

```
[1] FALSE
```

è³‡æ–™å‹åˆ¥æª¢æŸ¥ - class()
====================================
ä½¿ç”¨`class(è®Šæ•¸åç¨±)`å‡½æ•¸ï¼Œç›´æ¥å›å‚³**è³‡æ–™å‹åˆ¥**

```r
class(num)
```

```
[1] "numeric"
```

```r
class(Sys.Date())
```

```
[1] "Date"
```


è³‡æ–™å‹åˆ¥è½‰æ› - as.
====================================

ä½¿ç”¨`as.`å‡½æ•¸è½‰æ›å‹åˆ¥

- è½‰æ›ç‚º**æ•¸å­—** `as.numeric(è®Šæ•¸åç¨±)`
- è½‰æ›ç‚º**æ–‡å­—** `as.character(è®Šæ•¸åç¨±)`
- è½‰æ›ç‚º**å¸ƒæ—è®Šæ•¸** `as.logical(è®Šæ•¸åç¨±)`


```r
cha<-"100"
as.numeric(cha)
```

```
[1] 100
```

è³‡æ–™å‹åˆ¥è½‰æ› - as.
====================================

è‹¥ç„¡æ³•é †åˆ©å®Œæˆè½‰æ›ï¼Œæœƒå›å‚³ç©ºå€¼`NA`ï¼Œä¸¦å‡ºç¾è­¦å‘Šè¨Šæ¯

```r
as.numeric("abc")
```

```
[1] NA
```


è³‡æ–™å‹åˆ¥è½‰æ›ç·´ç¿’
====================================
type:alert
incremental:true
å›æƒ³èµ·DCard(çˆ¬èŸ²çµæœä¸ä»£è¡¨æœ¬äººæ„è¦‹)çš„è³‡æ–™ï¼ï¼ï¼

```r
library(rvest) ##è¼‰å…¥
DCardCGU<-"https://www.dcard.tw/f/cgu"
DCardContent<-read_html(DCardCGU)
post_title <- DCardContent %>% 
    html_nodes(".PostEntry_title_H5o4dj") %>% 
    html_text()
post_author<- DCardContent %>% 
    html_nodes(".PostAuthor_root_3vAJfe") %>% 
    html_text()
post_like<- DCardContent %>% 
    html_nodes(".hlvyVg") %>% html_text()
post_url <- DCardContent %>% 
    html_nodes(".PostEntry_root_V6g0rd") %>% html_attr("href")
DCardCGU_posts <- 
    data.frame(title = post_title,
               author=post_author, 
               likeN=post_like,
               url=paste0("https://www.dcard.tw",post_url),
               stringsAsFactors=F)
```

è³‡æ–™å‹åˆ¥è½‰æ›ç·´ç¿’
====================================
type:alert
è©•è«–æ•¸å’ŒæŒ‰è®šæ•¸éƒ½æ˜¯å­—ä¸²å‹åˆ¥ (chr)

```r
str(DCardCGU_posts)
```

```
'data.frame':	40 obs. of  4 variables:
 $ title : chr  "æ˜¯èª°æ‰äº†æ’æ°£ç®¡" "çƒ˜ç„™é€±é è³¼~3/10è™Ÿæ”¶å–®" "\U0001f493ã€Šå¤§æ˜æ˜Ÿå­¸å ‚-å°ç…œã€‹ç”Ÿå‘½æ•™è‚²è¬›åº§æš¨ç™½è‰²æƒ…äººç¯€ç‰¹åˆ¥æ´»å‹•\U0001f493" "TED å¹´æœƒ" ...
 $ author: chr  "é•·åºšå¤§å­¸" "é•·åºšå¤§å­¸" "é•·åºšå¤§å­¸" "é•·åºšå¤§å­¸" ...
 $ likeN : chr  "15" "15" "14" "11" ...
 $ url   : chr  "https://www.dcard.tw/f/cgu/p/230841097-æ˜¯èª°æ‰äº†æ’æ°£ç®¡" "https://www.dcard.tw/f/cgu/p/230840149-çƒ˜ç„™é€±é è³¼~3ï¼10è™Ÿæ”¶å–®" "https://www.dcard.tw/f/cgu/p/230837127-\U0001f493ã€Šå¤§æ˜æ˜Ÿå­¸å ‚-å°ç…œã€‹ç”Ÿå‘½æ•™è‚²è¬›åº§æš¨ç™½è‰²æƒ…äººç¯€ç‰¹åˆ¥æ´»å‹•\U0001f493" "https://www.dcard.tw/f/cgu/p/230837080-TED-å¹´æœƒ" ...
```
è©²å¦‚ä½•å°‡é€™å…©å€‹æ¬„ä½è½‰æˆæ•¸å­—å‘¢ï¼Ÿ

æ–‡å­—å­—ä¸²è™•ç†
====================================
type:sub-section 

- åŸºæœ¬è™•ç†
- æœå°‹å­—ä¸²
- [Regular Expression æ­£è¦è¡¨ç¤ºå¼ @ R](https://github.com/CGUIM-BigDataAnalysis/BigDataCGUIM/blob/master/105/RegularExpression.md)

åŸºæœ¬è™•ç†
====================================

- åˆ‡å‰² `strsplit()` **Split**
- å­é›† `substr()` **sub string**
- å¤§å°å¯«è½‰æ› `toupper()` `tolower()`
- å…©æ–‡å­—é€£æ¥ `paste()` `paste0()`
- æ–‡å­—å–ä»£ `gsub()` **substitute**
- å‰å¾Œç©ºç™½å»é™¤ `str_trim()` éœ€å®‰è£`stringr` package **trim**

åŸºæœ¬è™•ç†-åˆ‡å‰²
====================================
strsplit (æ¬²åˆ‡å‰²çš„å­—ä¸²,ç”¨ä»€éº¼ç¬¦è™Ÿåˆ‡å‰²)

```r
strsplit ("Hello World"," ")
```

```
[[1]]
[1] "Hello" "World"
```

åŸºæœ¬è™•ç†-åˆ‡å‰²ï¼ˆå¤šå­—å…ƒï¼‰|
====================================
strsplit (æ¬²åˆ‡å‰²çš„å­—ä¸²,åˆ‡å‰²ç¬¦è™Ÿ1|åˆ‡å‰²ç¬¦è™Ÿ2|...)

```r
strsplit ("Hello World"," |o")
```

```
[[1]]
[1] "Hell" ""     "W"    "rld" 
```

åŸºæœ¬è™•ç†-å­é›†ï¼ˆåˆ‡ä¸€å°æ®µï¼‰
====================================
substr(æ¬²åšå­é›†çš„å­—ä¸²,é–‹å§‹ä½ç½®,çµæŸä½ç½®)

```r
substr("Hello World", start=2,stop=4)
```

```
[1] "ell"
```

åŸºæœ¬è™•ç†-å¤§å°å¯«è½‰æ›
====================================

```r
toupper("Hello World")
```

```
[1] "HELLO WORLD"
```

```r
tolower("Hello World")
```

```
[1] "hello world"
```

åŸºæœ¬è™•ç†-å…©æ–‡å­—é€£æ¥
====================================
paste(æ¬²é€£æ¥çš„å­—ä¸²1, æ¬²é€£æ¥çš„å­—ä¸²2, æ¬²é€£æ¥çš„å­—ä¸²3,.... sep=ä¸­é–“ç”¨ä»€éº¼ç¬¦è™Ÿåˆ†éš”)

```r
paste("Hello", "World")
```

```
[1] "Hello World"
```

```r
paste("Hello", "World", sep='')
```

```
[1] "HelloWorld"
```

```r
paste0("Hello", "World")
```

```
[1] "HelloWorld"
```

åŸºæœ¬è™•ç†-æ–‡å­—å–ä»£
====================================
gsub(æƒ³è¦æ›æ‰çš„èˆŠå­—ä¸²,æƒ³è¦æ›æˆçš„æ–°å­—ä¸²,æ¬²ä½œå–ä»£çš„å®Œæ•´å­—ä¸²)

```r
gsub("o","0","Hello World")
```

```
[1] "Hell0 W0rld"
```

åŸºæœ¬è™•ç†-æ–‡å­—å–ä»£ï¼ˆå¤šå­—å…ƒï¼‰|
====================================
gsub(æƒ³è¦æ›æ‰çš„èˆŠå­—ä¸²1|æƒ³è¦æ›æ‰çš„èˆŠå­—ä¸²2|...,æƒ³è¦æ›æˆçš„æ–°å­—ä¸²,æ¬²ä½œå–ä»£çš„å®Œæ•´å­—ä¸²)

```r
gsub("o|l","0","Hello World")
```

```
[1] "He000 W0r0d"
```

åŸºæœ¬è™•ç†-å‰å¾Œç©ºç™½å»é™¤
====================================
str_trimè¦ä½¿ç”¨å‰éœ€è¦å®‰è£èˆ‡è¼‰å…¥**stringr**å¥—ä»¶

```r
library(stringr)
str_trim(" Hello World ")
```

```
[1] "Hello World"
```


æœå°‹å­—ä¸²
====================================
- é€šå¸¸ä½¿ç”¨åœ¨**æ¯”å°æ–‡å­—å‘é‡**
- **æœ‰åˆ†å¤§å°å¯«**
- ä¾ç…§å›å‚³å€¼çš„å‹æ…‹ä¸åŒï¼Œæœ‰å…©ç¨®å¸¸ç”¨å‡½æ•¸
    - å›å‚³ç¬¦åˆæ¢ä»¶ä¹‹å‘é‡ä½ç½®(index) `grep(æœå°‹æ¢ä»¶,è¦æœå°‹çš„å‘é‡)`
    - å›å‚³æ¯å€‹å‘é‡æ˜¯å¦ç¬¦åˆæ¢ä»¶(TRUE or FALSE) `grepl(æœå°‹æ¢ä»¶,è¦æœå°‹çš„å‘é‡)`


```r
##åœ¨å§“åæ–‡å­—å‘é‡ä¸­å°‹æ‰¾Aï¼Œå›å‚³åŒ…å«"A"ä¹‹å…ƒç´ ä½ç½®
grep("A",c("Alex","Tom","Amy","Joy","Emma")) 
```

```
[1] 1 3
```

æœå°‹å­—ä¸² - grepl()
====================================

```r
##åœ¨å§“åæ–‡å­—å‘é‡ä¸­å°‹æ‰¾Aï¼Œå›å‚³å„å…ƒç´ æ˜¯å¦åŒ…å«"A"
grepl("A",c("Alex","Tom","Amy","Joy","Emma")) 
```

```
[1]  TRUE FALSE  TRUE FALSE FALSE
```

```r
##åœ¨å§“åæ–‡å­—å‘é‡ä¸­å°‹æ‰¾aï¼Œå›å‚³å„å…ƒç´ æ˜¯å¦åŒ…å«"a"
grepl("a",c("Alex","Tom","Amy","Joy","Emma")) 
```

```
[1] FALSE FALSE FALSE FALSE  TRUE
```

æœå°‹å­—ä¸² - grep()
====================================

```r
##åœ¨å§“åæ–‡å­—å‘é‡ä¸­å°‹æ‰¾Aï¼Œå›å‚³åŒ…å«"A"çš„å…ƒç´ ä½ç½®
grep("A",c("Alex","Tom","Amy","Joy","Emma")) 
```

```
[1] 1 3
```

```r
##åœ¨å§“åæ–‡å­—å‘é‡ä¸­å°‹æ‰¾aï¼Œå›å‚³åŒ…å«"a"çš„å…ƒç´ ä½ç½®
grep("a",c("Alex","Tom","Amy","Joy","Emma")) 
```

```
[1] 5
```

æœå°‹å­—ä¸² - grep()
====================================
type:alert
å¤šå­—å…ƒï¼Ÿ


å­é›†Subset - ä¸€ç¶­è³‡æ–™
====================================
type:sub-section 

ä¹‹å‰æœ‰ä»‹ç´¹ä½¿ç”¨`[ ]`å–å‡ºå–®ä¸€æˆ–å¤šå€‹å…ƒç´ çš„æ–¹æ³•

```r
letters ##Rèªè¨€å…§å»ºè³‡æ–™ä¹‹ä¸€
```

```
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q"
[18] "r" "s" "t" "u" "v" "w" "x" "y" "z"
```

```r
letters[1] ##å–å‡ºletterså‘é‡çš„ç¬¬ä¸€å€‹å…ƒç´ 
```

```
[1] "a"
```

å­é›†Subset - ä¸€ç¶­è³‡æ–™
====================================

ä¹Ÿå¯ä»¥ç”¨â€œè² è™Ÿâ€å»æ‰ä¸è¦çš„è³‡æ–™

```r
letters[c(1,3,5)] ##å–å‡ºletterså‘é‡çš„ç¬¬1,3,5å€‹å…ƒç´ 
```

```
[1] "a" "c" "e"
```

```r
letters[c(-1,-3,-5)] ##å–å‡ºletterså‘é‡é™¤äº†ç¬¬1,3,5å€‹å…ƒç´ ä¹‹å¤–çš„æ‰€æœ‰å…ƒç´ 
```

```
 [1] "b" "d" "f" "g" "h" "i" "j" "k" "l" "m" "n" "o" "p" "q" "r" "s" "t"
[18] "u" "v" "w" "x" "y" "z"
```

å­é›†Subset - ä¸€ç¶­è³‡æ–™
====================================
è‹¥æƒ³è¦å¿«é€Ÿå–å¾—ä¸€å‘é‡çš„é–‹é ­èˆ‡çµå°¾å…ƒç´ ï¼Œå¯ä½¿ç”¨`head()`å’Œ`tail()`å‡½æ•¸

```r
head(letters,5) ##å–å‡ºletterså‘é‡çš„å‰äº”å€‹å…ƒç´ 
```

```
[1] "a" "b" "c" "d" "e"
```

```r
tail(letters,3) ##å–å‡ºletterså‘é‡çš„å¾Œä¸‰å€‹å…ƒç´ 
```

```
[1] "x" "y" "z"
```

å­é›†Subset - äºŒç¶­è³‡æ–™
====================================
type:sub-section 
- å¯é‡å°åˆ—(Row)å’Œè¡Œ(Column)åšå­é›†
- ä½¿ç”¨`[ ]`ï¼Œä½†å› æ‡‰äºŒç¶­è³‡æ–™çš„éœ€æ±‚ï¼Œä»¥`,`åˆ†éš”åˆ—èˆ‡è¡Œçš„ç¯©é¸æ¢ä»¶
- è³‡æ–™ç¯©é¸åŸå‰‡ç‚º**å‰Row,å¾ŒColumn**ï¼Œ**å‰åˆ—,å¾Œè¡Œ**
- è‹¥ä¸æƒ³ç¯©é¸åˆ—ï¼Œå‰‡åœ¨`,`å‰æ–¹ä¿æŒ**ç©ºç™½**å³å¯ã€‚
- ç¯©é¸æ–¹å¼å¯è¼¸å…¥**ä½ç½®(index)**ã€**æ¬„ä½åç¨±**æˆ–è¼¸å…¥**å¸ƒæ—è®Šæ•¸(TRUE/FALSE)**
    - è¼¸å…¥ä½ç½®: `dataFrame[row index,column index]`
    - è¼¸å…¥å¸ƒæ—è®Šæ•¸: `dataFrame[c(T,F,T),c(T,F,T)]`
    - è¼¸å…¥æ¬„ä½åç¨±: `dataFrame[row name,column name]`

å­é›†Subset - äºŒç¶­è³‡æ–™ []
====================================

```r
iris[1,2] ##ç¬¬ä¸€åˆ—Rowï¼Œç¬¬äºŒè¡ŒColumn
```

```
[1] 3.5
```

```r
iris[1:3,] ##ç¬¬1~3åˆ—Rowï¼Œæ‰€æœ‰çš„è¡ŒColumn
```

| Sepal.Length| Sepal.Width| Petal.Length| Petal.Width|Species |
|------------:|-----------:|------------:|-----------:|:-------|
|          5.1|         3.5|          1.4|         0.2|setosa  |
|          4.9|         3.0|          1.4|         0.2|setosa  |
|          4.7|         3.2|          1.3|         0.2|setosa  |

å­é›†Subset - äºŒç¶­è³‡æ–™ []
====================================

```r
iris[1:10,c(T,F,T,F,T)] ##ç¬¬1~10åˆ—Rowï¼Œç¬¬1,3,5è¡ŒColumn (TRUE)
```

| Sepal.Length| Petal.Length|Species |
|------------:|------------:|:-------|
|          5.1|          1.4|setosa  |
|          4.9|          1.4|setosa  |
|          4.7|          1.3|setosa  |
|          4.6|          1.5|setosa  |
|          5.0|          1.4|setosa  |
|          5.4|          1.7|setosa  |
|          4.6|          1.4|setosa  |
|          5.0|          1.5|setosa  |
|          4.4|          1.4|setosa  |
|          4.9|          1.5|setosa  |

å­é›†Subset - äºŒç¶­è³‡æ–™ []
====================================

```r
iris[,"Species"] ##æ‰€æœ‰çš„åˆ—Rowï¼Œåç¨±ç‚ºSpeciesçš„è¡ŒColumn
```

```
  [1] setosa     setosa     setosa     setosa     setosa     setosa    
  [7] setosa     setosa     setosa     setosa     setosa     setosa    
 [13] setosa     setosa     setosa     setosa     setosa     setosa    
 [19] setosa     setosa     setosa     setosa     setosa     setosa    
 [25] setosa     setosa     setosa     setosa     setosa     setosa    
 [31] setosa     setosa     setosa     setosa     setosa     setosa    
 [37] setosa     setosa     setosa     setosa     setosa     setosa    
 [43] setosa     setosa     setosa     setosa     setosa     setosa    
 [49] setosa     setosa     versicolor versicolor versicolor versicolor
 [55] versicolor versicolor versicolor versicolor versicolor versicolor
 [61] versicolor versicolor versicolor versicolor versicolor versicolor
 [67] versicolor versicolor versicolor versicolor versicolor versicolor
 [73] versicolor versicolor versicolor versicolor versicolor versicolor
 [79] versicolor versicolor versicolor versicolor versicolor versicolor
 [85] versicolor versicolor versicolor versicolor versicolor versicolor
 [91] versicolor versicolor versicolor versicolor versicolor versicolor
 [97] versicolor versicolor versicolor versicolor virginica  virginica 
[103] virginica  virginica  virginica  virginica  virginica  virginica 
[109] virginica  virginica  virginica  virginica  virginica  virginica 
[115] virginica  virginica  virginica  virginica  virginica  virginica 
[121] virginica  virginica  virginica  virginica  virginica  virginica 
[127] virginica  virginica  virginica  virginica  virginica  virginica 
[133] virginica  virginica  virginica  virginica  virginica  virginica 
[139] virginica  virginica  virginica  virginica  virginica  virginica 
[145] virginica  virginica  virginica  virginica  virginica  virginica 
Levels: setosa versicolor virginica
```

å­é›† [ ] ç·´ç¿’
====================================
type:alert
incremental:true

- å–å‡ºirisè³‡æ–™é›†"Species"æ¬„ä½çš„å‰ååˆ—(Row)
- å–å‡ºirisè³‡æ–™é›†æ‰€æœ‰å–®æ•¸åˆ—(Row)
- å–å‡ºirisè³‡æ–™é›†æœ€å¾Œå…©å€‹æ¬„ä½çš„æ‰€æœ‰å¶æ•¸åˆ—(Row)

å­é›†Subset - äºŒç¶­è³‡æ–™ $
====================================
ä¹Ÿå¯ä½¿ç”¨`$`ç¬¦è™Ÿåš**Columnçš„ç¯©é¸**

```r
# ç­‰åŒæ–¼iris[,"Species"]
iris$Species ##æ‰€æœ‰çš„åˆ—Rowï¼Œåç¨±ç‚ºSpeciesçš„è¡ŒColumn
```

```
  [1] setosa     setosa     setosa     setosa     setosa     setosa    
  [7] setosa     setosa     setosa     setosa     setosa     setosa    
 [13] setosa     setosa     setosa     setosa     setosa     setosa    
 [19] setosa     setosa     setosa     setosa     setosa     setosa    
 [25] setosa     setosa     setosa     setosa     setosa     setosa    
 [31] setosa     setosa     setosa     setosa     setosa     setosa    
 [37] setosa     setosa     setosa     setosa     setosa     setosa    
 [43] setosa     setosa     setosa     setosa     setosa     setosa    
 [49] setosa     setosa     versicolor versicolor versicolor versicolor
 [55] versicolor versicolor versicolor versicolor versicolor versicolor
 [61] versicolor versicolor versicolor versicolor versicolor versicolor
 [67] versicolor versicolor versicolor versicolor versicolor versicolor
 [73] versicolor versicolor versicolor versicolor versicolor versicolor
 [79] versicolor versicolor versicolor versicolor versicolor versicolor
 [85] versicolor versicolor versicolor versicolor versicolor versicolor
 [91] versicolor versicolor versicolor versicolor versicolor versicolor
 [97] versicolor versicolor versicolor versicolor virginica  virginica 
[103] virginica  virginica  virginica  virginica  virginica  virginica 
[109] virginica  virginica  virginica  virginica  virginica  virginica 
[115] virginica  virginica  virginica  virginica  virginica  virginica 
[121] virginica  virginica  virginica  virginica  virginica  virginica 
[127] virginica  virginica  virginica  virginica  virginica  virginica 
[133] virginica  virginica  virginica  virginica  virginica  virginica 
[139] virginica  virginica  virginica  virginica  virginica  virginica 
[145] virginica  virginica  virginica  virginica  virginica  virginica 
Levels: setosa versicolor virginica
```

å­é›†Subset - äºŒç¶­è³‡æ–™subset()
====================================
**Rowçš„ç¯©é¸**å¯ä½¿ç”¨`subset()`å‡½æ•¸ï¼Œä½¿ç”¨æ–¹æ³•ç‚º`subset(è³‡æ–™è¡¨,ç¯©é¸é‚è¼¯)`


```r
subset(iris,Species=="virginica") ##Speciesç­‰æ–¼"virginica"çš„åˆ—Rowï¼Œæ‰€æœ‰çš„è¡ŒColumn
```

|    | Sepal.Length| Sepal.Width| Petal.Length| Petal.Width|Species   |
|:---|------------:|-----------:|------------:|-----------:|:---------|
|101 |          6.3|         3.3|          6.0|         2.5|virginica |
|102 |          5.8|         2.7|          5.1|         1.9|virginica |
|103 |          7.1|         3.0|          5.9|         2.1|virginica |
|104 |          6.3|         2.9|          5.6|         1.8|virginica |
|105 |          6.5|         3.0|          5.8|         2.2|virginica |
|106 |          7.6|         3.0|          6.6|         2.1|virginica |
|107 |          4.9|         2.5|          4.5|         1.7|virginica |
|108 |          7.3|         2.9|          6.3|         1.8|virginica |
|109 |          6.7|         2.5|          5.8|         1.8|virginica |
|110 |          7.2|         3.6|          6.1|         2.5|virginica |
|111 |          6.5|         3.2|          5.1|         2.0|virginica |
|112 |          6.4|         2.7|          5.3|         1.9|virginica |
|113 |          6.8|         3.0|          5.5|         2.1|virginica |
|114 |          5.7|         2.5|          5.0|         2.0|virginica |
|115 |          5.8|         2.8|          5.1|         2.4|virginica |
|116 |          6.4|         3.2|          5.3|         2.3|virginica |
|117 |          6.5|         3.0|          5.5|         1.8|virginica |
|118 |          7.7|         3.8|          6.7|         2.2|virginica |
|119 |          7.7|         2.6|          6.9|         2.3|virginica |
|120 |          6.0|         2.2|          5.0|         1.5|virginica |
|121 |          6.9|         3.2|          5.7|         2.3|virginica |
|122 |          5.6|         2.8|          4.9|         2.0|virginica |
|123 |          7.7|         2.8|          6.7|         2.0|virginica |
|124 |          6.3|         2.7|          4.9|         1.8|virginica |
|125 |          6.7|         3.3|          5.7|         2.1|virginica |
|126 |          7.2|         3.2|          6.0|         1.8|virginica |
|127 |          6.2|         2.8|          4.8|         1.8|virginica |
|128 |          6.1|         3.0|          4.9|         1.8|virginica |
|129 |          6.4|         2.8|          5.6|         2.1|virginica |
|130 |          7.2|         3.0|          5.8|         1.6|virginica |
|131 |          7.4|         2.8|          6.1|         1.9|virginica |
|132 |          7.9|         3.8|          6.4|         2.0|virginica |
|133 |          6.4|         2.8|          5.6|         2.2|virginica |
|134 |          6.3|         2.8|          5.1|         1.5|virginica |
|135 |          6.1|         2.6|          5.6|         1.4|virginica |
|136 |          7.7|         3.0|          6.1|         2.3|virginica |
|137 |          6.3|         3.4|          5.6|         2.4|virginica |
|138 |          6.4|         3.1|          5.5|         1.8|virginica |
|139 |          6.0|         3.0|          4.8|         1.8|virginica |
|140 |          6.9|         3.1|          5.4|         2.1|virginica |
|141 |          6.7|         3.1|          5.6|         2.4|virginica |
|142 |          6.9|         3.1|          5.1|         2.3|virginica |
|143 |          5.8|         2.7|          5.1|         1.9|virginica |
|144 |          6.8|         3.2|          5.9|         2.3|virginica |
|145 |          6.7|         3.3|          5.7|         2.5|virginica |
|146 |          6.7|         3.0|          5.2|         2.3|virginica |
|147 |          6.3|         2.5|          5.0|         1.9|virginica |
|148 |          6.5|         3.0|          5.2|         2.0|virginica |
|149 |          6.2|         3.4|          5.4|         2.3|virginica |
|150 |          5.9|         3.0|          5.1|         1.8|virginica |

å­é›†Subset - äºŒç¶­è³‡æ–™grepl()
====================================
**Rowçš„ç¯©é¸**ä¹Ÿå¯æ­é…å­—ä¸²æœå°‹å‡½æ•¸`grepl()`

```r
grepl("color",iris$Species)
iris[grepl("color",iris$Species),] ##SpeciesåŒ…å«"color"çš„åˆ—ï¼Œæ‰€æœ‰çš„è¡Œ
```

```
[1] FALSE FALSE FALSE FALSE FALSE FALSE
```



|   | Sepal.Length| Sepal.Width| Petal.Length| Petal.Width|Species    |
|:--|------------:|-----------:|------------:|-----------:|:----------|
|51 |          7.0|         3.2|          4.7|         1.4|versicolor |
|52 |          6.4|         3.2|          4.5|         1.5|versicolor |
|53 |          6.9|         3.1|          4.9|         1.5|versicolor |
|54 |          5.5|         2.3|          4.0|         1.3|versicolor |
|55 |          6.5|         2.8|          4.6|         1.5|versicolor |
|56 |          5.7|         2.8|          4.5|         1.3|versicolor |

å­é›†Subset - head()
====================================

è‹¥æƒ³è¦å¿«é€Ÿå–å¾—è³‡æ–™æ¡†çš„å‰å¹¾åˆ—(Row)æˆ–å¾Œå¹¾åˆ—ï¼Œä¹Ÿå¯ä½¿ç”¨`head()`å’Œ`tail()`å‡½æ•¸

```r
head(iris,5) ##å–å‡ºirisè³‡æ–™æ¡†çš„å‰äº”åˆ—
```

| Sepal.Length| Sepal.Width| Petal.Length| Petal.Width|Species |
|------------:|-----------:|------------:|-----------:|:-------|
|          5.1|         3.5|          1.4|         0.2|setosa  |
|          4.9|         3.0|          1.4|         0.2|setosa  |
|          4.7|         3.2|          1.3|         0.2|setosa  |
|          4.6|         3.1|          1.5|         0.2|setosa  |
|          5.0|         3.6|          1.4|         0.2|setosa  |

å­é›†Subset - tail()
====================================

è‹¥æƒ³è¦å¿«é€Ÿå–å¾—è³‡æ–™æ¡†çš„å‰å¹¾åˆ—(Row)æˆ–å¾Œå¹¾åˆ—ï¼Œä¹Ÿå¯ä½¿ç”¨`head()`å’Œ`tail()`å‡½æ•¸

```r
tail(iris,3) ##å–å‡ºirisè³‡æ–™æ¡†çš„å¾Œä¸‰åˆ—
```

|    | Sepal.Length| Sepal.Width| Petal.Length| Petal.Width|Species   |
|:---|------------:|-----------:|------------:|-----------:|:---------|
|148 |          6.5|         3.0|          5.2|         2.0|virginica |
|149 |          6.2|         3.4|          5.4|         2.3|virginica |
|150 |          5.9|         3.0|          5.1|         1.8|virginica |


å­é›†ç¶œåˆç·´ç¿’
====================================
type:alert
incremental:true

- å–å‡ºå…§å»ºè³‡æ–™é›†mtcarsä¸­ï¼Œæ‰€æœ‰cylå°æ–¼ç­‰æ–¼6çš„è»Šç¨®è³‡æ–™
    - æ–¹æ³•ä¸€ subset()
    - æ–¹æ³•äºŒ [ ]
- å–å‡ºå…§å»ºè³‡æ–™é›†mtcarsä¸­ï¼Œæ‰€æœ‰Toyotaå“ç‰Œçš„è»Šç¨®è³‡æ–™
    - æç¤º: rownames(), grepl()
    - [ ]


è³‡æ–™çµ„åˆ
====================================
type:sub-section

æœ‰æ™‚éœ€è¦åœ¨è³‡æ–™æ¡†æ–°å¢ä¸€åˆ—ï¼Œæˆ–æ–°å¢ä¸€è¡Œ

- Row åˆ—çš„çµ„åˆ `rbind()`
- Column è¡Œçš„çµ„åˆ `cbind()`

`rbind()`å’Œ`cbind()`çš„åƒæ•¸å¯ä»¥æ˜¯å‘é‡ï¼Œä¹Ÿå¯ä»¥æ˜¯è³‡æ–™æ¡†

è³‡æ–™çµ„åˆ - rbind()
====================================

ä½¿ç”¨å‘é‡åšè³‡æ–™æ•´åˆç¯„ä¾‹:

```r
rbind(c(1,2,3), #ç¬¬ä¸€åˆ—
      c(4,5,6)  #ç¬¬äºŒåˆ—
      ) 
```

```
     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    4    5    6
```

è³‡æ–™çµ„åˆ - rbind()
====================================

ä½¿ç”¨è³‡æ–™æ¡†èˆ‡å‘é‡åšè³‡æ–™æ•´åˆç¯„ä¾‹:

```r
irisAdd<-rbind(iris, #è³‡æ–™æ¡†
      c(1,1,1,1,"versicolor")  #æ–°å¢ä¸€åˆ—
      ) 
```

```r
tail(irisAdd,2)
```

|    |Sepal.Length |Sepal.Width |Petal.Length |Petal.Width |Species    |
|:---|:------------|:-----------|:------------|:-----------|:----------|
|150 |5.9          |3           |5.1          |1.8         |virginica  |
|151 |1            |1           |1            |1           |versicolor |

è³‡æ–™çµ„åˆ - cbind()
====================================

ä½¿ç”¨å‘é‡åšè³‡æ–™æ•´åˆç¯„ä¾‹:

```r
cbind(c(1,2,3), #ç¬¬ä¸€è¡Œ
      c(4,5,6)  #ç¬¬äºŒè¡Œ
      ) 
```

```
     [,1] [,2]
[1,]    1    4
[2,]    2    5
[3,]    3    6
```

è³‡æ–™çµ„åˆ - cbind()
====================================

ä½¿ç”¨è³‡æ–™æ¡†èˆ‡å‘é‡åšè³‡æ–™æ•´åˆç¯„ä¾‹:

```r
irisAdd<-cbind(iris, #è³‡æ–™æ¡†
      rep("Add",nrow(iris))  #æ–°å¢ä¸€è¡Œ
      ) 
```

```r
tail(irisAdd,1)
```

|    | Sepal.Length| Sepal.Width| Petal.Length| Petal.Width|Species   |rep("Add", nrow(iris)) |
|:---|------------:|-----------:|------------:|-----------:|:---------|:----------------------|
|150 |          5.9|           3|          5.1|         1.8|virginica |Add                    |

    
è³‡æ–™çµåˆ (Join)
====================================

é™¤äº†æŒ‰ç…§è¡Œåˆ—é †åºçš„çµ„åˆå¤–ï¼Œæ›´å¸¸æœ‰çš„æƒ…å½¢æ˜¯ä¾ç…§æŸå€‹æ¬„ä½çš„å€¼ä½œç‚ºçµåˆä¾æ“šï¼Œå¦‚ï¼š

- ç”¨å­¸è™ŸæŠŠä»¥ä¸‹å…©å€‹è³‡æ–™æ¡†çµåˆæˆä¸€å€‹è³‡æ–™æ¡†
    - å­¸è™Ÿèˆ‡å§“åè³‡æ–™æ¡†
    - å­¸è™Ÿèˆ‡å®¿èˆåºŠä½è³‡æ–™æ¡†
- ç”¨ç¸£å¸‚åç¨±èˆ‡å¹´åº¦å°‡äººå£è³‡æ–™èˆ‡é†«ç™‚è³‡æºè³‡æ–™çµåˆ

è³‡æ–™çµåˆ (Join)
====================================
åŸç”Ÿçš„Rç’°å¢ƒå¯ä»¥ç”¨`merge()`å‡½æ•¸å°‡è³‡æ–™æ¡†çµåˆï¼Œä½¿ç”¨æ–¹æ³•ç‚º`merge(è³‡æ–™æ¡†1,è³‡æ–™æ¡†2,by="çµåˆä¾æ“šæ¬„ä½")`


```r
nameDF<-data.frame(ID=c(1,2,3,4,5),
                  Name=c("Amy","Bob","Chris","David","Emma"))
scoreDF<-data.frame(ID=c(1,2,4),
                  Score=c(60,90,50))
```

è³‡æ–™çµåˆ (Join)
====================================

```r
nameDF
```

| ID|Name  |
|--:|:-----|
|  1|Amy   |
|  2|Bob   |
|  3|Chris |
|  4|David |
|  5|Emma  |
---

```r
scoreDF
```

| ID| Score|
|--:|-----:|
|  1|    60|
|  2|    90|
|  4|    50|

è³‡æ–™çµåˆ (Join) æ›´æœ‰æ•ˆç‡çš„åšæ³•
====================================

`dplyr`å¥—ä»¶æä¾›æ›´æœ‰æ•ˆç‡çš„è³‡æ–™çµåˆæ–¹æ³•ï¼ŒåŒ…æ‹¬:

- inner_join()ï¼šä¿ç•™æœ‰å°æ‡‰åˆ°çš„è³‡æ–™
- left_join()ï¼šä¿ç•™å·¦é‚Šè³‡æ–™æ¡†çš„æ‰€æœ‰è³‡æ–™
- right_join()ï¼šä¿ç•™å³é‚Šè³‡æ–™æ¡†çš„æ‰€æœ‰è³‡æ–™
- full_join()ï¼šä¿ç•™æ‰€æœ‰è³‡æ–™
- semi_join()
- anti_join()

è³‡æ–™çµåˆ - inner_join()
====================================
åªä¿ç•™å…©å¼µè¡¨éƒ½æœ‰çš„åˆ—
ä½¿ç”¨æ–¹æ³• `inner_join(x, y, by = )`


```r
library(dplyr)
inner_join(nameDF,scoreDF,by="ID")
```

```
  ID  Name Score
1  1   Amy    60
2  2   Bob    90
3  4 David    50
```

è³‡æ–™çµåˆ - left_join()
====================================
ä¿ç•™å·¦é‚Šçš„è¡¨æ‰€æœ‰çš„åˆ—
ä½¿ç”¨æ–¹æ³• `left_join(x, y, by = )`


```r
library(dplyr)
left_join(nameDF,scoreDF,by="ID")
```

```
  ID  Name Score
1  1   Amy    60
2  2   Bob    90
3  3 Chris    NA
4  4 David    50
5  5  Emma    NA
```

è³‡æ–™çµåˆ - right_join()
====================================
ä¿ç•™å³é‚Šçš„è¡¨æ‰€æœ‰çš„åˆ—
ä½¿ç”¨æ–¹æ³• `right_join(x, y, by = )`


```r
library(dplyr)
right_join(nameDF,scoreDF,by="ID")
```

```
  ID  Name Score
1  1   Amy    60
2  2   Bob    90
3  4 David    50
```

è³‡æ–™çµåˆ - full_join()
====================================
ä¿ç•™æ‰€æœ‰çš„åˆ—
ä½¿ç”¨æ–¹æ³• `full_join(x, y, by = )`


```r
library(dplyr)
full_join(nameDF,scoreDF,by="ID")
```

```
  ID  Name Score
1  1   Amy    60
2  2   Bob    90
3  3 Chris    NA
4  4 David    50
5  5  Emma    NA
```

è³‡æ–™çµåˆ - semi_join()
====================================
ç•™ä¸‹å·¦é‚Šçš„IDä¹Ÿæœ‰å‡ºç¾åœ¨å³é‚Šçš„è¡¨çš„åˆ—ï¼Œå³è¡¨è³‡æ–™ä¸æœƒè¼¸å‡º
ä½¿ç”¨æ–¹æ³• `semi_join(x, y, by = )`


```r
library(dplyr)
semi_join(nameDF,scoreDF,by="ID")
```

```
  ID  Name
1  1   Amy
2  2   Bob
3  4 David
```

è³‡æ–™çµåˆç·´ç¿’
====================================
type:alert

- ä¸‹è¼‰[106å„æ‘é‡Œæ•™è‚²ç¨‹åº¦è³‡æ–™](https://data.moi.gov.tw/MoiOD/Data/DataDetail.aspx?oid=EC96FA1A-005C-4801-BBCD-5CD246CC9D80)
- ä¸‹è¼‰[10612å„æ‘ï¼ˆé‡Œï¼‰æˆ¶ç±äººå£çµ±è¨ˆæœˆå ±è¡¨](https://data.moi.gov.tw/MoiOD/Data/DataDetail.aspx?oid=F4478CE5-7A72-4B14-B91A-F4701758328F)
- åˆ†åˆ¥è®€å…¥å…©å€‹csvæª”
- ä¾ç…§å€åŸŸåˆ¥èˆ‡æ‘é‡Œåç¨±ï¼Œå°‡å…©å¼µè¡¨æ ¼çµåˆï¼Œåªç•™ä¸‹æœ‰å°æ‡‰åˆ°çš„è³‡æ–™
- è«‹å•çµåˆå¾Œçš„è³‡æ–™æœ‰å¹¾åˆ—ï¼Ÿ



éºæ¼å€¼è™•ç†
====================================
type:sub-section

- éºæ¼å€¼(Missing Value)å¸¸å¸¸å‡ºç¾åœ¨çœŸå¯¦è³‡æ–™å…§ï¼Œåœ¨æ•¸å€¼é‹ç®—æ™‚å¸¸æœƒæœ‰å•é¡Œ
- æœ€ç°¡å–®çš„æ–¹æ³•æ˜¯å°‡æœ‰ç¼ºå€¼çš„è³‡æ–™ç§»é™¤

éºæ¼å€¼è™•ç† is.na()
====================================
å¦‚è³‡æ–™ç‚ºå‘é‡ï¼Œå¯ä½¿ç”¨`is.na()`ä¾†åˆ¤æ–·è³‡æ–™æ˜¯å¦ç‚ºç©ºå€¼`NA`ï¼Œè‹¥ç‚ºçœŸ`TRUE`ï¼Œå‰‡å°‡è³‡æ–™ç§»é™¤ã€‚

```r
naVec<-c("a","b",NA,"d","e")
is.na(naVec)
```

```
[1] FALSE FALSE  TRUE FALSE FALSE
```

```r
naVec[!is.na(naVec)] ##ä¿ç•™æ‰€æœ‰åœ¨is.na()æª¢æŸ¥å›å‚³FALSEçš„å…ƒç´ 
```

```
[1] "a" "b" "d" "e"
```



éºæ¼å€¼è™•ç† complete.cases()
====================================
è‹¥è³‡æ–™å‹æ…‹ç‚ºè³‡æ–™æ¡†ï¼Œå¯ä½¿ç”¨`complete.cases`ä¾†é¸å‡ºå®Œæ•´çš„è³‡æ–™åˆ—ï¼Œå¦‚æœè³‡æ–™åˆ—æ˜¯å®Œæ•´çš„ï¼Œå‰‡æœƒå›å‚³çœŸTRUE

```r
head(airquality,5)
```

| Ozone| Solar.R| Wind| Temp| Month| Day|
|-----:|-------:|----:|----:|-----:|---:|
|    41|     190|  7.4|   67|     5|   1|
|    36|     118|  8.0|   72|     5|   2|
|    12|     149| 12.6|   74|     5|   3|
|    18|     313| 11.5|   62|     5|   4|
|    NA|      NA| 14.3|   56|     5|   5|

```r
complete.cases(airquality) 
```

```
  [1]  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE FALSE FALSE
 [12]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
 [23]  TRUE  TRUE FALSE FALSE FALSE  TRUE  TRUE  TRUE  TRUE FALSE FALSE
 [34] FALSE FALSE FALSE FALSE  TRUE FALSE  TRUE  TRUE FALSE FALSE  TRUE
 [45] FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE FALSE
 [56] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE  TRUE  TRUE FALSE  TRUE
 [67]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE
 [78]  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE
 [89]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE FALSE FALSE  TRUE
[100]  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE
[111]  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE
[122]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[133]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE
[144]  TRUE  TRUE  TRUE  TRUE  TRUE  TRUE FALSE  TRUE  TRUE  TRUE
```

éºæ¼å€¼è™•ç† complete.cases()
====================================
è‹¥è³‡æ–™å‹æ…‹ç‚ºè³‡æ–™æ¡†ï¼Œå¯ä½¿ç”¨`complete.cases`ä¾†é¸å‡ºå®Œæ•´çš„è³‡æ–™åˆ—ï¼Œå¦‚æœè³‡æ–™åˆ—(row)æ˜¯å®Œæ•´çš„ï¼Œå‰‡æœƒå›å‚³çœŸTRUE


```r
head(airquality[complete.cases(airquality),]) ##ä¿ç•™æ‰€æœ‰åœ¨complete.cases()æª¢æŸ¥å›å‚³TRUEçš„å…ƒç´ 
```

|   | Ozone| Solar.R| Wind| Temp| Month| Day|
|:--|-----:|-------:|----:|----:|-----:|---:|
|1  |    41|     190|  7.4|   67|     5|   1|
|2  |    36|     118|  8.0|   72|     5|   2|
|3  |    12|     149| 12.6|   74|     5|   3|
|4  |    18|     313| 11.5|   62|     5|   4|
|7  |    23|     299|  8.6|   65|     5|   7|
|8  |    19|      99| 13.8|   59|     5|   8|


